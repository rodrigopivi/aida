(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{105:function(e,t,n){"use strict";var r;function o(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    text-align: center;\n    font-size: 19px;\n"]);return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=t.ColoredText=void 0,n(109);var i=((r=n(85))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"Logo__ColoredText",componentId:"sc-1ib5m8j-0"})(["font-weight:bold;color:#1890ff;display:inline-block;text-decoration:none;background-image:linear-gradient(to right,#1890ff 25%,#c4ce35 50%,#ac24e2 75%,#1890ff 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;background-size:300% auto;&.static{background-position:-215% center;}&.animated{@keyframes text-gradient{to{background-position:-300% center;}}animation:text-gradient 16s ease-in-out infinite;}"]);t.ColoredText=i;var a=i.extend(o());t.Logo=a},107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.createElement(i.default,{key:"helmet",title:"Aida",meta:[{name:"description",content:"Build amazing conversational experiences"},{content:"aida, chatito, chatbots, ai chatbots, nlu, nlp, natural language processing, tensorflowjs, keras, named entity recognition, text classification",name:"keywords"}]},o.createElement("link",{rel:"shortcut icon",href:"/favicon.ico"}),o.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),o.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),o.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),o.createElement("link",{rel:"manifest",href:"/site.webmanifest"}),o.createElement("link",{rel:"mask-icon",href:"/safari-pinned-tab.svg",color:"#5bbad5"}),o.createElement("meta",{name:"msapplication-TileColor",content:"#da532c"}),o.createElement("meta",{name:"theme-color",content:"#fcfcfc"}),o.createElement("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}))};var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(156))&&r.__esModule?r:{default:r}},116:function(e,t,n){var r;e.exports=(r=n(117))&&r.default||r},117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(0)),o=l(n(2)),i=l(n(24)),a=l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){var t=e.location,n=a.default.getResourcesForPathnameSync(t.pathname);return r.default.createElement(i.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}({location:t,pageResources:n},n.json))};u.propTypes={location:o.default.shape({pathname:o.default.string.isRequired}).isRequired};var c=u;t.default=c},128:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(176);var o=p(n(177));n(145);var i=p(n(84));n(184);var a=p(n(185));n(109);var l=p(n(86)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),u=p(n(85)),c=n(105);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=a.default.Header,y=a.default.Content,v=a.default.Footer,b=/^\/overview(\/.*)?$/i,w=/^\/demo(\/.*)?$/i,O=/^\/train(\/.*)?$/i,S=(0,u.default)(y).withConfig({displayName:"Layout__StyledContent",componentId:"sc-11gw4mw-0"})(["> p{text-align:justify;}background:#fcfcfc;padding:48px 48px 48px 72px;min-height:280px;"]),P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,m(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,s.Component),n=t,(r=[{key:"render",value:function(){var e="-1";return b.test(this.props.location.pathname)?e="0":w.test(this.props.location.pathname)?e="1":O.test(this.props.location.pathname)&&(e="2"),s.createElement(a.default,{style:{minHeight:"100vh"}},s.createElement(g,{style:{background:"#fcfcfc",padding:0,display:"flex"}},s.createElement(c.Logo,{style:{textAlign:"right",width:200,paddingLeft:24,paddingRight:24},className:"static"},s.createElement(l.default,{to:"/"},"< Aida />")),s.createElement("div",{style:{flex:1}}),s.createElement("div",{style:{padding:"0 48px 0 24px",display:"inline-block",textAlign:"right",float:"right"}},s.createElement("a",{href:"https://github.com/rodrigopivi/aida",title:"Aida",style:{fontSize:26}},s.createElement(i.default,{type:"github"})))),s.createElement(a.default,{style:{flexDirection:"row"}},s.createElement(a.default.Sider,{width:200,breakpoint:"lg",collapsedWidth:"0",theme:"light",style:{backgroundColor:"#fcfcfc"}},s.createElement(o.default,{theme:"light",mode:"inline",defaultSelectedKeys:[e],style:{background:"#fcfcfc"}},s.createElement(o.default.Item,{key:"0"},s.createElement(l.default,{to:"/overview"},s.createElement(i.default,{type:"right-circle-o"}),"Overview")),s.createElement(o.default.Item,{key:"1"},s.createElement(l.default,{to:"/demo"},s.createElement(i.default,{type:"right-circle-o"}),"Demo")),s.createElement(o.default.Item,{key:"2"},s.createElement(l.default,{to:"/train"},s.createElement(i.default,{type:"right-circle-o"}),"Train your own")))),s.createElement(a.default,{style:{padding:"24px 0 0 24px"}},s.createElement(S,null,this.props.children),s.createElement(v,{style:{textAlign:"center"}},"Aida © 2018 Rodrigo Pimentel"))))}}])&&f(n.prototype,r),u&&f(n,u),t}();t.default=P},164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphql=function(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")},Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"withPrefix",{enumerable:!0,get:function(){return i.withPrefix}}),Object.defineProperty(t,"navigate",{enumerable:!0,get:function(){return i.navigate}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return i.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return i.replace}}),Object.defineProperty(t,"navigateTo",{enumerable:!0,get:function(){return i.navigateTo}}),Object.defineProperty(t,"waitForRouteChange",{enumerable:!0,get:function(){return a.waitForRouteChange}}),Object.defineProperty(t,"PageRenderer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return s.default}}),t.StaticQuery=t.StaticQueryContext=void 0;var r=u(n(0)),o=u(n(2)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(86)),a=n(22),l=u(n(116)),s=u(n(23));function u(e){return e&&e.__esModule?e:{default:e}}var c=r.default.createContext({});t.StaticQueryContext=c;var p=function(e){return r.default.createElement(c.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.default.createElement("div",null,"Loading (StaticQuery)")})};t.StaticQuery=p,p.propTypes={data:o.default.object,query:o.default.string.isRequired,render:o.default.func,children:o.default.func}},174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipelineModel=void 0;t.PipelineModel=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}},264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AidaPipeline=t.defaultPipelineDefinition=void 0;var r=s(n(265)),o=s(n(266)),i=n(267),a=s(n(271)),l=s(n(272));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)})}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={config:{classification:{epochs:5,filterSizes:[2,4,8],lowConfidenceThreshold:.3,numFilters:128},default:{batchSize:120,drop:.5,embeddingDimensions:300,lossThresholdToStopTraining:1e-6,maxNgrams:20,trainingValidationSplit:.3},ner:{addAttention:!0,epochs:5,lowConfidenceThreshold:.2,numFilters:[128,128],rnnUnits:100}}};t.defaultPipelineDefinition=f;t.AidaPipeline=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"pipelineDefinition",f),p(this,"datasetParams",void 0),p(this,"embeddingsModel",void 0),p(this,"classificationModel",void 0),p(this,"nerModel",void 0),p(this,"logger",void 0),p(this,"tokenizer",void 0),p(this,"train",(d=c(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.log("START TRAINING PIPELINE MODELS!"),n.logger.log("=================================================================================================="),e.next=4,n.classificationModel.train(t);case 4:return e.next=6,n.nerModel.train(t);case 6:n.logger.log("FINISHED TRAINING PIPELINE MODELS!"),n.logger.log("==================================================================================================");case 8:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})),p(this,"test",(u=c(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.log("START TESTING PIPELINE MODELS!"),n.logger.log("=================================================================================================="),e.next=4,n.classificationModel.test(t);case 4:return r=e.sent,e.next=7,n.nerModel.test(t);case 7:return o=e.sent,e.abrupt("return",{classificationStats:r,nerStats:o});case 9:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})),p(this,"predict",function(e){var t=n.classificationModel.predict(e);return{classification:t,ner:n.nerModel.predict(e,t)}}),p(this,"save",(s=c(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.log("SAVING PIPELINE MODELS!"),n.logger.log("=================================================================================================="),e.next=4,n.classificationModel.tfModel().save(t.classificationPath);case 4:return e.next=6,n.nerModel.tfModel().save(t.nerPath);case 6:return e.next=8,n.embeddingsModel.tfModel().save(t.embeddingPath);case 8:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})),t.pipelineDefinition&&(this.pipelineDefinition=t.pipelineDefinition),this.datasetParams=t.datasetParams,this.logger=t.logger,this.tokenizer=function(e){var t=e?e.toLowerCase():e;if("en"===t)return r.default;if("es"===t)return o.default;throw new Error("Invalid config language. Only 'en' and 'es' are supported.")}(this.datasetParams.language),this.embeddingsModel=new i.EmbeddingsModel(t.ngramToIdDictionary,t.datasetParams.maxWordsPerSentence,this.pipelineDefinition.config.default.maxNgrams,this.pipelineDefinition.config.default.embeddingDimensions,this.tokenizer,t.pretrainedEmbedding,t.pretrainedNGramVectors);var s;var u;var d;var m,h,g=Object.assign({},this.pipelineDefinition.config.default,this.pipelineDefinition.config.classification);t.trainStatsHandler&&(m=t.trainStatsHandler.classification,h=t.trainStatsHandler.ner),this.classificationModel=new a.default(g,this.datasetParams,this.embeddingsModel,this.logger,t.pretrainedClassifier,m);var y=Object.assign({},this.pipelineDefinition.config.default,this.pipelineDefinition.config.ner);this.nerModel=new l.default(y,this.datasetParams,this.embeddingsModel,this.logger,t.pretrainedNer,h)}},265:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"FILTER_CHARS_REGEXP",/[^a-z0-9\.,\?\'"!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~ ]/gi),r(this,"WORD_SEPARATORS_REGEXP",/([\ \.\,\%\*\-\=\+\;\|\`\~])/g),r(this,"NON_ALPHANUMERIC_REGEXP",/[^a-z0-9]/gi),r(this,"UNKNOWN_NGRAM_KEY","__"),r(this,"NUMBERS_MAP",{zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9"}),r(this,"sanitizeSentence",function(e){return e.trim().toLowerCase().replace(t.FILTER_CHARS_REGEXP,"")}),r(this,"splitSentenceToWords",function(e){return t.sanitizeSentence(e).split(t.WORD_SEPARATORS_REGEXP).map(function(e){return e.trim()}).filter(function(e){return!!e})}),r(this,"splitWordToBiGrams",function(e){var t=[],n=e.length-2+1;if(n<1)return t;for(;n--;)t[n]=e.substr(n,2);return t}),r(this,"joinWordsToSentence",function(e){return e.join(" ")})};t.default=o},266:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"FILTER_CHARS_REGEXP",/[^aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ 0-9\.,\?\'"!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]/g),r(this,"WORD_SEPARATORS_REGEXP",/([\ \.\,\%\*\-\=\+\;\|\`\~])/g),r(this,"NON_ALPHANUMERIC_REGEXP",/[^aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ0-9]/g),r(this,"UNKNOWN_NGRAM_KEY","__"),r(this,"NUMBERS_MAP",{cero:"0",uno:"1",dos:"2",tres:"3",cuatro:"4",cinco:"5",seis:"6",siete:"7",ocho:"8",nueve:"9"}),r(this,"sanitizeSentence",function(e){return e.trim().toLowerCase().replace(t.FILTER_CHARS_REGEXP,"")}),r(this,"splitSentenceToWords",function(e){return t.sanitizeSentence(e).split(t.WORD_SEPARATORS_REGEXP).map(function(e){return e.trim()}).filter(function(e){return!!e})}),r(this,"splitWordToBiGrams",function(e){var t=[],n=e.length-3+1;if(n<1)return t;for(;n--;)t[n]=e.substr(n,3);return t}),r(this,"joinWordsToSentence",function(e){return e.join(" ")})};t.default=o},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddingsModel=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(89)),o=n(268),i=n(270);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){var e,t,n;function s(e,t,n,o,i,a,u){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),l(this,"tokenizer",void 0),l(this,"ngramToIdDictionary",void 0),l(this,"maxWords",void 0),l(this,"maxNgrams",void 0),l(this,"embeddingDimensions",void 0),l(this,"model",void 0),l(this,"inputModel",null),l(this,"tfModel",function(){return c.model}),l(this,"modelInput",function(){if(!c.inputModel){var e=r.layers.input({shape:[c.maxWords,c.maxNgrams],dtype:"int32"}),t=c.model.apply(e);c.inputModel=r.model({inputs:e,outputs:t})}return c.inputModel}),l(this,"embed",function(e){return r.tidy(function(){var t=c.sentencesToWordIds(e),n=c.modelInput().predictOnBatch(t);return t.dispose(),n})}),l(this,"dictionary",function(){return c.ngramToIdDictionary}),l(this,"sentencesToWordIds",function(e){return r.tidy(function(){var t=e.map(function(e){return c.tokenizer.splitSentenceToWords(e)}),n=r.buffer([e.length,c.maxWords,c.maxNgrams],"int32");return t.forEach(function(e,t){e.forEach(function(e,r){void 0!==c.ngramToIdDictionary[e]?n.set(c.ngramToIdDictionary[e],t,r,0):e.length&&c.generateWordIdsFromNGrams(e).forEach(function(o,i){i>c.maxNgrams?console.warn("Word exceeding max n grams per word: ",e):n.set(o,t,r,i)})})}),n.toTensor()})}),l(this,"generateWordIdsFromNGrams",function(e){var t=[],n=function(e){return void 0!==c.ngramToIdDictionary[e]&&(t.push(c.ngramToIdDictionary[e]),!0)};if(e.length>2){var r=!0;if(c.tokenizer.splitWordToBiGrams(e).forEach(function(e){!n(e)&&r&&(r=!1)}),r)return t}return t=[],e.split("").forEach(n),t}),this.ngramToIdDictionary=e,this.maxWords=t,this.maxNgrams=n,this.embeddingDimensions=o,this.model=a||s.setupModel(u||new Map,this.maxWords,this.maxNgrams,this.embeddingDimensions),this.tokenizer=i}return e=s,n=[{key:"setupModel",value:function(e,t,n,a){var l=r.sequential(),s=r.layers.embedding({embeddingsInitializer:new i.PreSavedEmbeddingsInitializer({embeddingDimensions:a,pretrainedNGramVectors:e}),inputDim:e.size,inputLength:[n],maskZero:!0,outputDim:a,trainable:!1});return l.add(r.layers.timeDistributed({layer:s,inputShape:[t,n]})),l.add(new o.CombineNgramsLayer({})),l}}],(t=null)&&a(e.prototype,t),n&&a(e,n),s}();t.EmbeddingsModel=s},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CombineNgramsLayer=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(89)),o=n(384);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=new Array(a),p=0;p<a;p++)s[p]=arguments[p];return r=this,n=!(o=(e=l(t)).call.apply(e,[this].concat(s)))||"object"!==i(o)&&"function"!=typeof o?u(r):o,c(u(u(n)),"className",t.className),n}var n,p,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r.layers.Layer),n=t,(p=[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[e.length-1]]}},{key:"call",value:function(e,t){var n=this;return r.tidy(function(){n.invokeCallHook(e,t);var i=r.sum(e,2),a=(0,o.l2Normalize)(i,2);return i.dispose(),a})}}])&&a(n.prototype,p),f&&a(n,f),t}();t.CombineNgramsLayer=p,c(p,"className","CombineNgramsLayer"),r.serialization.SerializationMap.register(p)},270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreSavedEmbeddingsInitializer=void 0;var r=a(n(89)),o=a(n(388)),i=n(155);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=c(t).call(this))||"object"!==l(o)&&"function"!=typeof o?f(r):o,d(f(f(n)),"config",void 0),d(f(f(n)),"className",t.className),n.config=e,n}var n,a,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o.Initializer),n=t,(a=[{key:"apply",value:function(e,t){var n=this;return this.config&&this.config.pretrainedNGramVectors?r.tidy(function(){var e=(0,i.flatMapDeep)(s(n.config.pretrainedNGramVectors.values()));return r.tensor2d(e,[n.config.pretrainedNGramVectors.size,n.config.embeddingDimensions],"float32")}):r.zeros(e,t)}},{key:"getConfig",value:function(){return this.config.pretrainedNGramVectors}}])&&u(n.prototype,a),m&&u(n,m),t}();t.PreSavedEmbeddingsInitializer=m,d(m,"className","PreSavedEmbeddingsInitializer"),r.serialization.SerializationMap.register(m)},271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(89)),o=n(155),i=a(n(174));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)})}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t,n,a;function u(e,t,n,i,a,f){var d,g,y;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),g=this,y=p(u).call(this),d=!y||"object"!==l(y)&&"function"!=typeof y?m(g):y,h(m(m(d)),"config",void 0),h(m(m(d)),"datasetParams",void 0),h(m(m(d)),"model",void 0),h(m(m(d)),"embeddingsModel",void 0),h(m(m(d)),"logger",void 0),h(m(m(d)),"classificationTrainStatsHandler",void 0),h(m(m(d)),"tfModel",function(){return d.model}),h(m(m(d)),"predict",function(e){var t=[];return r.tidy(function(){var n=d.embeddingsModel.embed(e),r=d.model.predict(n),o=r.dataSync();r.dispose(),n.dispose();var i=d.datasetParams.intents;e.forEach(function(e,n){var r=o.slice(n*i.length,n*i.length+i.length),a=[];r.forEach(function(t,n){return a.push({confidence:t,intent:i[n],sentence:e})}),a.sort(function(e,t){return e.confidence>t.confidence?-1:1}),t.push(a[0])})}),t}),h(m(m(d)),"train",function(){var e=c(regeneratorRuntime.mark(function e(t){var n,i,a,l,u,c,p,f,m,h,g,y,v,b,w,O,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.chunk)(t.trainY,d.config.batchSize),i=(0,o.chunk)(t.trainX,d.config.batchSize),d.logger.log("Start training classification model!"),a=d.model,l=!1,u=!0,c=!1,p=void 0,e.prev=8,f=i.entries()[Symbol.iterator]();case 10:if(u=(m=f.next()).done){e.next=34;break}if(h=s(m.value,2),g=h[0],y=h[1],!l){e.next=14;break}return e.abrupt("return");case 14:return v=d.embeddingsModel.embed(y),b=r.tensor1d(n[g],"int32"),w=r.oneHot(b,d.datasetParams.intents.length),e.next=19,a.fit(v,w,{callbacks:{onBatchEnd:r.nextFrame},epochs:d.config.epochs,shuffle:!0,validationSplit:d.config.trainingValidationSplit});case 19:b.dispose(),v.dispose(),w.dispose(),O=a.history.history,S=O.val_loss.length-1,d.classificationTrainStatsHandler&&d.classificationTrainStatsHandler({batch:g+1,batchEpochs:a.history.epoch.length,currentBatchSize:i[g].length,tensorsInMemory:r.memory().numTensors,totalBatches:i.length,trainingAccuracy:O.acc[S],trainingLoss:O.loss[S],validationAccuracy:O.val_acc[S],validationLoss:O.val_loss[S]}),d.logger.log("Trained ".concat(a.history.epoch.length," epochs on batch ").concat(g+1," of ").concat(i.length)),d.logger.log("Training Loss: ".concat(O.loss[S]," | Training Accuracy: ").concat(O.acc[S])),d.logger.log("Validation Loss: ".concat(O.val_loss[S]," | Validation Accuracy: ").concat(O.val_acc[S])),d.logger.warn("(Memory) Number of tensors in memory at the end of batch: ".concat(r.memory().numTensors)),d.logger.log("=================================================================================================="),d.config.lossThresholdToStopTraining&&O.loss[S]<d.config.lossThresholdToStopTraining&&O.val_loss[S]<d.config.lossThresholdToStopTraining&&(l=!0,d.logger.warn("Enough accuracy reached! Ending training after batch ".concat(g+1," of ").concat(i.length)),d.logger.log("=================================================================================================="));case 31:u=!0,e.next=10;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(8),c=!0,p=e.t0;case 40:e.prev=40,e.prev=41,u||null==f.return||f.return();case 43:if(e.prev=43,!c){e.next=46;break}throw p;case 46:return e.finish(43);case 47:return e.finish(40);case 48:case"end":return e.stop()}},e,this,[[8,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()),h(m(m(d)),"test",function(){var e=c(regeneratorRuntime.mark(function e(t,n){var r,i,a,l,u,c,p,f,m,h,g,y,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n||d.defaultResultsLogger,i={correct:0,wrong:0,lowConfidence:0},a=(0,o.chunk)(t.testX,d.config.batchSize),l=(0,o.chunk)(t.testY,d.config.batchSize),u=!0,c=!1,p=void 0,e.prev=7,f=a.entries()[Symbol.iterator]();!(u=(m=f.next()).done);u=!0)h=s(m.value,2),g=h[0],y=h[1],v=d.predict(y),r(y,l[g],v,i);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),c=!0,p=e.t0;case 15:e.prev=15,e.prev=16,u||null==f.return||f.return();case 18:if(e.prev=18,!c){e.next=21;break}throw p;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",i);case 24:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(t,n){return e.apply(this,arguments)}}()),h(m(m(d)),"defaultResultsLogger",function(e,t,n,r){return e.forEach(function(e,o){var i=d.datasetParams.intents[t[o]],a=n[o].intent===i;if(n[o].confidence<d.config.lowConfidenceThreshold){if(void 0===r.lowConfidence)return;r.lowConfidence++,d.logger.warn("LOW CONFIDENCE (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e))}else a?(r.correct++,d.logger.debug("CORRECT (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e))):(r.wrong++,d.logger.error("WRONG (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e)))}),r}),d.config=e,d.datasetParams=t,d.embeddingsModel=n,d.model=a||u.setup(d.config,d.datasetParams),d.logger=i,d.classificationTrainStatsHandler=f,d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,i.PipelineModel),t=u,a=[{key:"setup",value:function(e,t){var n=t.maxWordsPerSentence,o=t.intents.length,i=r.train.adam(.0066,.0025,.1),a=r.input({dtype:"float32",shape:[n,e.embeddingDimensions],name:"embedded_words"}),l=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[0]],name:"classConv1",padding:"valid"}).apply(a),s=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[0]+1}).apply(l),u=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[1]],name:"classConv2",padding:"valid"}).apply(a),c=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[1]+1}).apply(u),p=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[2]],name:"classConv3",padding:"valid"}).apply(a),f=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[2]+1}).apply(p),d=r.layers.concatenate({axis:1}).apply([s,c,f]),m=r.layers.flatten().apply(d),h=r.layers.dropout({rate:e.drop}).apply(m),g=r.layers.flatten().apply(s),y=r.layers.concatenate({axis:1}).apply([h,g]),v=r.layers.dense({activation:"softmax",units:o}).apply(y),b=r.model({inputs:a,outputs:v});return b.compile({loss:"categoricalCrossentropy",metrics:["accuracy"],optimizer:i}),b}}],(n=null)&&f(t.prototype,n),a&&f(t,a),u}();t.default=g},272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(89)),o=n(155),i=l(n(174)),a=n(273);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,l,"next",e)}function l(e){c(i,r,o,a,l,"throw",e)}a(void 0)})}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t,n,l;function c(e,t,n,i,a,l){var d,m,y;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),m=this,y=f(c).call(this),d=!y||"object"!==u(y)&&"function"!=typeof y?h(m):y,g(h(h(d)),"config",void 0),g(h(h(d)),"datasetParams",void 0),g(h(h(d)),"model",void 0),g(h(h(d)),"embeddingsModel",void 0),g(h(h(d)),"logger",void 0),g(h(h(d)),"nerTrainStatsHandler",void 0),g(h(h(d)),"tfModel",function(){return d.model}),g(h(h(d)),"rawPrediction",function(e,t){return r.tidy(function(){var n=d.datasetParams,i=n.maxWordsPerSentence,a=n.slotsToId,l=Object.keys(a).length,s=d.embeddingsModel.embed(e),u=t.map(function(e){var t=new Array(d.datasetParams.intents.length).fill(0),n=d.datasetParams.intents.indexOf(e.intent);return-1!==n&&(t[n]=1),t}),c=(0,o.flatMapDeep)(u),p=r.tensor2d(c,[u.length,d.datasetParams.intents.length]),f=d.model.predict([p,s]),m=f.dataSync();return f.dispose(),p.dispose(),s.dispose(),(0,o.chunk)(m,i*l).map(function(e){return(0,o.chunk)(e,l)}).map(function(e){return e.map(function(e){var t=0,n=e.length?e[t]:0;return e.forEach(function(r,o){e[t]<r&&(t=o,n=r)}),{highestIndex:t,confidence:n}})})})}),g(h(h(d)),"predict",function(e,t){var n=d.config.lowConfidenceThreshold,r=d.datasetParams.slotsToId,o=d.rawPrediction(e,t);return e.map(function(e,t){var i=o[t],a=d.embeddingsModel.tokenizer.splitSentenceToWords(e);return a.reduce(function(t,o,l){t.current&&0===t.current.confidence&&(t.current.confidence=i[l].confidence);var s=Object.keys(r).find(function(e){return i[l]&&r[e]===i[l].highestIndex});return s&&t.current?(t.current.key!==s?(t.current.key&&"O"!==t.current.key&&t.current.confidence>=n&&(t.slots[t.current.key]||(t.slots[t.current.key]=[]),t.slots[t.current.key].push({confidence:t.current.confidence,value:t.current.value})),t.current={confidence:i[l].confidence,key:s,value:o}):(t.current.value+=" ".concat(o),t.current.confidence=(i[l].confidence+t.current.confidence)/2),l+1===a.length?("O"!==t.current.key&&t.current.confidence>=n&&(t.slots[t.current.key]||(t.slots[t.current.key]=[]),t.slots[t.current.key].push({confidence:t.current.confidence,value:t.current.value})),{sentence:e,slots:t.slots}):t):t},{current:{key:"",value:"",confidence:0},slots:{},sentence:""})})}),g(h(h(d)),"train",function(){var e=p(regeneratorRuntime.mark(function e(t){var n,i,a,l,c,p,f,m,h,g,y,v,b,w,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.chunk)(t.trainY2,d.config.batchSize),i=(0,o.chunk)(t.trainY,d.config.batchSize),a=(0,o.chunk)(t.trainX,d.config.batchSize),l=d.config,c=l.epochs,p=l.trainingValidationSplit,f=Object.keys(d.datasetParams.slotsToId).length,d.logger.log("Start training NER model!"),m=!1,h=!0,g=!1,y=void 0,e.prev=10,v=regeneratorRuntime.mark(function e(){var t,o,l,u,h,g,y,v,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s(w.value,2),o=t[0],l=t[1],!m){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return u=r.tidy(function(){return r.oneHot(r.tensor1d(i[o],"int32"),d.datasetParams.intents.length).asType("float32")}),h=d.embeddingsModel.embed(l),g=r.tidy(function(){var e=[],t=!0,i=!1,a=void 0;try{for(var l,s=n[o][Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u=l.value,c=r.tensor1d(u,"int32").pad([[0,d.datasetParams.maxWordsPerSentence-u.length]]),p=r.oneHot(c,f).asType("float32");c.dispose(),e.push(p)}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}var m=r.stack(e);return e.forEach(function(e){return e.dispose()}),m}),e.next=8,d.model.fit([u,h],g,{callbacks:{onBatchEnd:r.nextFrame},epochs:c,shuffle:!0,validationSplit:p});case 8:return u.dispose(),h.dispose(),e.next=12,r.nextFrame();case 12:y=d.model.history.history,v=y.val_loss.length-1,b=d.model.history.epoch,d.nerTrainStatsHandler&&d.nerTrainStatsHandler({batch:o+1,batchEpochs:b.length,currentBatchSize:a[o].length,tensorsInMemory:r.memory().numTensors,totalBatches:a.length,trainingAccuracy:y.acc[v],trainingLoss:y.loss[v],validationAccuracy:y.val_acc[v],validationLoss:y.val_loss[v]}),d.logger.log("Trained ".concat(b.length," epochs on batch ").concat(o+1," of ").concat(a.length)),d.logger.log("Training Loss: ".concat(y.loss[v]," | Training Accuracy: ").concat(y.acc[v])),d.logger.log("Validation Loss: ".concat(y.val_loss[v]," | Validation Accuracy: ").concat(y.val_acc[v])),d.logger.warn("(Memory) Number of tensors in memory at the end of batch: ".concat(r.memory().numTensors)),d.logger.log("=================================================================================================="),g.dispose(),d.config.lossThresholdToStopTraining&&y.loss[v]<d.config.lossThresholdToStopTraining&&y.val_loss[v]<d.config.lossThresholdToStopTraining&&(m=!0,d.logger.warn("Enough accuracy reached! Ending training after batch ".concat(o+1," of ").concat(a.length)),d.logger.log("=================================================================================================="));case 23:case"end":return e.stop()}},e,this)}),b=a.entries()[Symbol.iterator]();case 13:if(h=(w=b.next()).done){e.next=21;break}return e.delegateYield(v(),"t0",15);case 15:if("object"!==u(O=e.t0)){e.next=18;break}return e.abrupt("return",O.v);case 18:h=!0,e.next=13;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(10),g=!0,y=e.t1;case 27:e.prev=27,e.prev=28,h||null==b.return||b.return();case 30:if(e.prev=30,!g){e.next=33;break}throw y;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}},e,this,[[10,23,27,35],[28,,30,34]])}));return function(t){return e.apply(this,arguments)}}()),g(h(h(d)),"test",function(){var e=p(regeneratorRuntime.mark(function e(t,n){var i,a,l,u,c,p,f,m,h,g,y,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n||d.defaultResultsLogger,a={correct:0,wrong:0},l=d.config.batchSize,u=(0,o.chunk)(t.testX,l),c=(0,o.chunk)(t.testY,l),p=(0,o.chunk)(t.testY2,l),f=!0,m=!1,h=void 0,e.prev=9,g=regeneratorRuntime.mark(function e(){var t,n,o,l,u,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s(v.value,2),n=t[0],o=t[1],l=c[n],u=o.map(function(e,t){return{confidence:1,intent:d.datasetParams.intents[l[t]],sentence:e}}),f=d.rawPrediction(o,u).map(function(e){return e.map(function(e){return e.highestIndex})}),i(o,p[n],f,a),e.next=7,r.nextFrame();case 7:case"end":return e.stop()}},e,this)}),y=u.entries()[Symbol.iterator]();case 12:if(f=(v=y.next()).done){e.next=17;break}return e.delegateYield(g(),"t0",14);case 14:f=!0,e.next=12;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(9),m=!0,h=e.t1;case 23:e.prev=23,e.prev=24,f||null==y.return||y.return();case 26:if(e.prev=26,!m){e.next=29;break}throw h;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.abrupt("return",a);case 32:case"end":return e.stop()}},e,this,[[9,19,23,31],[24,,26,30]])}));return function(t,n){return e.apply(this,arguments)}}()),g(h(h(d)),"defaultResultsLogger",function(e,t,n,r){return e.forEach(function(e,o){var i=t[o],a=n[o],l=!0;i.forEach(function(e,t){a[t]!==e&&l&&(l=!1)}),l?(r.correct++,d.logger.debug("CORRECT - ".concat(e," expected: ").concat(i,", predicted: ").concat(a))):(r.wrong++,d.logger.error("WRONG - ".concat(e," expected: ").concat(i,", predicted: ").concat(a)))}),r}),d.config=e,d.datasetParams=t,d.embeddingsModel=n,d.model=a||c.setup(d.config,d.datasetParams),d.logger=i,d.nerTrainStatsHandler=l,d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,i.PipelineModel),t=c,l=[{key:"setup",value:function(e,t){var n=t.maxWordsPerSentence,o=e.addAttention,i=e.embeddingDimensions,l=e.numFilters,s=e.rnnUnits,u=Object.keys(t.slotsToId).length,c=r.train.adam(.0066,.0025,.1),p=r.input({dtype:"float32",shape:[n,i],name:"embedded_words"}),f=r.layers.conv1d({activation:"relu",filters:l[0],inputShape:[n,i],kernelInitializer:"randomNormal",kernelSize:1,name:"nerConv1",padding:"valid"}).apply(p),d=r.layers.conv1d({activation:"relu",filters:l[0],kernelInitializer:"randomNormal",kernelSize:1,name:"nerConv2",padding:"valid"}).apply(f),m=r.input({dtype:"float32",shape:[t.intents.length],name:"embedded_intent"}),h=r.layers.repeatVector({n}).apply(m),g=r.layers.concatenate().apply([h,p,d]),y=r.layers.bidirectional({layer:r.layers.lstm({units:s,returnSequences:!0,name:"bidi_encoder"})}).apply(g),v=null;if(o){var b=new a.TimeSeriesAttention({name:"attention_weight"}).apply(y[0]);v=r.layers.concatenate().apply([b,y[0],y[1]])}else v=r.layers.concatenate().apply([y[0],y[1]]);var w=r.layers.dense({activation:"softmax",units:u}).apply(v),O=r.model({inputs:[m,p],outputs:w});return O.compile({loss:"categoricalCrossentropy",metrics:["accuracy"],optimizer:c}),O}}],(n=null)&&d(t.prototype,n),l&&d(t,l),c}();t.default=y},273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSeriesAttention=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(89)),o=n(389);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=l(t).call(this,e||{}))||"object"!==i(a)&&"function"!=typeof a?u(r):a,c(u(u(n)),"className",t.className),c(u(u(n)),"timed",null),n.inputSpec=[new o.InputSpec({ndim:3})],n.supportsMasking=!0,n}var n,p,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r.layers.Layer),n=t,(p=[{key:"build",value:function(e){var t=e[2],n=r.sequential({name:"per_time_step"});n.add(r.layers.dense({inputShape:[t],kernelInitializer:"zeros",units:t,activation:"softmax",name:"att_dense1"})),n.add(r.layers.dense({units:t,kernelInitializer:"glorotNormal",activation:"tanh",name:"att_dense2"})),this.timed=r.layers.timeDistributed({layer:n,name:"att_td"}),this.timed.build(e),this.trainableWeights=this.timed.trainableWeights,this.nonTrainableWeights=this.timed.nonTrainableWeights,this.built=!0}},{key:"call",value:function(e,t){var n=this;if(!this.built||!this.timed)throw new Error("Calling TimeSeriesAttention layer before it was built correctly.");return r.tidy(function(){n.invokeCallHook(e,t);var o=n.timed.apply(e),i=r.layers.permute({dims:[2,1]}).apply(o),a=r.unstack(e[0]),l=r.unstack(i),s=a.map(function(e,t){return r.dot(e,l[t])}),u=r.stack(s),c=r.softmax(u),p=r.layers.permute({dims:[2,1]}).apply(c),f=r.unstack(p).map(function(e,t){return r.dot(e,a[t])});return r.stack(f)})}},{key:"computeOutputShape",value:function(e){return e}}])&&a(n.prototype,p),f&&a(n,f),t}();t.TimeSeriesAttention=p,c(p,"className","TimeSeriesAttention"),r.serialization.SerializationMap.register(p)},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(124);var r=s(n(118));n(125);var o=s(n(119));n(165);var i=s(n(166));n(248);var a=s(n(390)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=(0,s(n(85)).default)(a.default.Search).withConfig({displayName:"TrainedPipelineTestInput__SearchInput",componentId:"sc-17hlu7-0"})(["> input{padding-right:70px !important;}"]),g=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=this,o=(e=p(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==u(o)&&"function"!=typeof o?d(r):o,m(d(d(n)),"state",{disabled:!1,outTextContent:null}),m(d(d(n)),"renderIntentsList",function(){return l.createElement("div",null,l.createElement("p",null,"The pipeline was trained on this list of intents and slots per intent:"),l.createElement("div",null,l.createElement("ul",null,l.createElement("li",null,"greet"),l.createElement("li",null,"bye"),l.createElement("li",null,"affirmative"),l.createElement("li",null,"negative"),l.createElement("li",null,"wtf (detect insults and out of context stuff)"),l.createElement("li",null,"playMusic -> slots: artist, song"),l.createElement("li",null,"addEventToCalendar -> slots: calendarEvent, dateTime"))),l.createElement("p",null,"You can try a sentence like 'please remind to me watch real madrid match tomorrow at 9pm' or 'play new york new york from frank sinatra'"),l.createElement("p",null,"Check the"," ",l.createElement("a",{target:"_blank",href:"https://github.com/rodrigopivi/aida/tree/master/typescript/intents"},"chatito definition files at the github repo"),"  for more details about the training examples generation."))}),m(d(d(n)),"predict",function(e){var t=n.props.pipeline.predict([e]);return Object.assign({},t.classification[0],t.ner[0])}),m(d(d(n)),"handleSubmit",function(e){if(!e||!e.trim())return null;n.setState({disabled:!0},function(){var t=JSON.stringify(n.predict(e),null,2);n.setState({outTextContent:t},function(){n.setState({disabled:!1});var e=document.getElementById("__inputSearch");e&&e.value&&(e.value="")})})}),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,l.Component),n=t,(a=[{key:"render",value:function(){return l.createElement("div",null,l.createElement(r.default,{type:"flex",justify:"center"},l.createElement(o.default,{span:24,sm:{span:12}},l.createElement(i.default,{title:"Test trained pipeline:",style:{minHeight:"100%"}},l.createElement("p",null,l.createElement(h,{placeholder:"Enter some input to process...",enterButton:"Send",size:"large",onSearch:this.handleSubmit,id:"__inputSearch",disabled:this.state.disabled})),this.renderIntentsList())),l.createElement(o.default,{span:24,sm:{span:12}},l.createElement(i.default,{title:"Pipeline output:",style:{minHeight:"100%"}},l.createElement("pre",{style:{marginTop:"2em"}},this.state.outTextContent||"")))))}}])&&c(n.prototype,a),s&&c(n,s),t}();t.default=g},333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(64)),o=a(n(709)),i=a(n(334));function a(e){return e&&e.__esModule?e:{default:e}}var l={lang:(0,r.default)({placeholder:"Select date",rangePlaceholder:["Start date","End date"]},o.default),timePickerLocale:(0,r.default)({},i.default)};t.default=l,e.exports=t.default},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={placeholder:"Select time"},e.exports=t.default},342:function(e,t){},343:function(e,t){},362:function(e,t){},365:function(e,t){},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=l(n(107)),i=l(n(128)),a=l(n(660));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.location;return r.createElement(i.default,{location:t,style:{minHeight:"95vh"}},r.createElement(o.default,null),r.createElement(a.default,null))}},660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(124);var r=g(n(118));n(165);var o=g(n(166));n(199);var i=g(n(200));n(700);var a=g(n(705));n(335);var l=g(n(336));n(125);var s=g(n(119)),u=h(n(89)),c=g(n(378)),p=n(86),f=h(n(0)),d=n(264),m=g(n(274));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,l,"next",e)}function l(e){v(i,r,o,a,l,"throw",e)}a(void 0)})}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=this,o=(e=O(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==y(o)&&"function"!=typeof o?P(r):o,_(P(P(n)),"state",{downloadProgress:0,isDownloading:!1,modelsLoaded:!1,selectedModel:"web"}),_(P(P(n)),"pipeline",null),_(P(P(n)),"logger",{debug:function(){return null},error:console.error,log:console.log,warn:console.warn}),_(P(P(n)),"downloadsTrainedModel",function(){var e=b(regeneratorRuntime.mark(function e(t){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={keras:{classification:(0,p.withPrefix)("/models/pretrained/keras/classification/model.json"),embedding:(0,p.withPrefix)("/models/pretrained/keras/embedding/model.json"),ner:(0,p.withPrefix)("/models/pretrained/keras/ner/model.json")},node:{classification:(0,p.withPrefix)("/models/pretrained/node/classification/model.json"),embedding:(0,p.withPrefix)("/models/pretrained/node/embedding/model.json"),ner:(0,p.withPrefix)("/models/pretrained/node/ner/model.json")},web:{classification:(0,p.withPrefix)("/models/pretrained/web/classification.json"),embedding:(0,p.withPrefix)("/models/pretrained/web/embedding.json"),ner:(0,p.withPrefix)("/models/pretrained/web/ner.json")}},e.next=3,u.loadModel(n[t].embedding);case 3:return r=e.sent,e.next=6,u.loadModel(n[t].classification);case 6:return o=e.sent,e.next=9,u.loadModel(n[t].ner);case 9:return i=e.sent,e.abrupt("return",{pretrainedEmbedding:r,pretrainedClassifier:o,pretrainedNer:i});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),_(P(P(n)),"loadSavedModels",b(regeneratorRuntime.mark(function e(){var t,r,o,i,a,l,s,u,c,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[(0,p.withPrefix)("/models/ngram_to_id_dictionary.json"),(0,p.withPrefix)("/models/dataset_params.json")],e.next=3,n.downloadFiles(t);case 3:return r=e.sent,o=r[0].data,i=r[1].data,e.next=8,n.downloadsTrainedModel(n.state.selectedModel);case 8:return a=e.sent,l=a.pretrainedClassifier,s=a.pretrainedNer,u=a.pretrainedEmbedding,c=n.logger,f=new d.AidaPipeline({datasetParams:i,logger:c,ngramToIdDictionary:o,pretrainedClassifier:l,pretrainedEmbedding:u,pretrainedNer:s}),n.pipeline=f,n.setState({modelsLoaded:!0}),e.abrupt("return",f);case 17:case"end":return e.stop()}},e,this)}))),_(P(P(n)),"downloadFiles",function(){var e=b(regeneratorRuntime.mark(function e(t){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,o=0,n.setState({isDownloading:!0,downloadProgress:0}),e.next=5,Promise.all(t.map(function(e){return c.default.get(e,{onDownloadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");null!==t&&(r+=t,o+=Math.round(100*e.loaded/r)),n.setState({downloadProgress:o})}})}));case 5:return i=e.sent,n.setState({isDownloading:!1,downloadProgress:100}),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n}var n,h,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,f.Component),n=t,(h=[{key:"componentWillUnmount",value:function(){console.log(u.memory()),u.disposeVariables(),window.tf=u}},{key:"render",value:function(){var e=this;if(this.state.modelsLoaded&&this.pipeline)return f.createElement(m.default,{pipeline:this.pipeline});var t=this.state.isDownloading||100===this.state.downloadProgress,n=t?100===this.state.downloadProgress?"Loading Models...":"Downloading...":"Start demo";return f.createElement(r.default,{type:"flex"},f.createElement(s.default,{span:24,sm:{span:12},style:{textAlign:"justify"}},f.createElement("h1",null,"Build conversational user experiences"),f.createElement("h3",null,"Aida is a library that helps you build conversational user experiences with this concepts in mind:"),f.createElement("ul",null,f.createElement("li",null,f.createElement("strong",null,"Universal application:")," The trained models should be able to run anywhere, that is why the models have two mirror implementations: in"," ",f.createElement("a",{href:"https://js.tensorflow.com/",target:"_blank"},"TensorflowJS")," ","to be able to train and run from browsers or nodejs, and in"," ",f.createElement("a",{href:"https://keras.io/",target:"_blank"},"Keras")," ","to run in python and export to mobile devices (CoreML for iOS and TensorFlow for Android)."),f.createElement("li",null,f.createElement("strong",null,"Offline support:")," It should be able to train and make predictions without connectivty, no need to have a server-side api, although the trained models can also run server-side behind an api if desired."),f.createElement("li",null,f.createElement("strong",null,"Low memory consumption:")," Having small file size and memory consumption is very important if we want to run from browsers. Most NLU models use huge dictionaries (several gigabytes size) like word2vec, to solve this problem, we are only using pre-trained"," ",f.createElement("a",{href:"https://fasttext.cc/",target:"_blank"},"fastText")," ","bigram embeddings, this keeps the dictionary very small, fast to download."),f.createElement("li",null,f.createElement("strong",null,"Accurate:")," Carefully crafted, close to state of the art neural network models for text classification and named entity recognition, the models will only get better as the field progresses and the community expands."),f.createElement("li",null,f.createElement("strong",null,"Easy to use:")," Getting started by creating a dataset and training couldn't be easier thanks to"," ",f.createElement("a",{href:"https://rodrigopivi.github.io/Chatito",target:"_blank"},"Chatito"),", you can create a large dataset in minutes, and start training without any setup, just from the browser.")),f.createElement("p",null,"Click 'start demo' to continue.")),f.createElement(s.default,{span:24,sm:{span:12}},f.createElement(o.default,{style:{marginLeft:"2em",textAlign:"center"}},f.createElement("div",null,f.createElement(l.default,{type:"circle",percent:this.state.downloadProgress})),f.createElement("div",{style:{marginTop:"1em",marginBottom:"1em"}},f.createElement(a.default,{defaultValue:this.state.selectedModel,style:{maxWidth:"100%"},onChange:function(t){return e.setState({selectedModel:t})}},f.createElement(a.default.Option,{value:"web"},"Load web trained models"),f.createElement(a.default.Option,{value:"node"},"Load node trained models"),f.createElement(a.default.Option,{value:"keras"},"Load keras trained models"))),f.createElement("div",null,f.createElement(i.default,{type:"primary",size:"large",disabled:t,onClick:this.loadSavedModels},n)),f.createElement("br",null),f.createElement("p",null,"Will download the trained models (about 5mb)"))))}}])&&w(n.prototype,h),g&&w(n,g),t}();t.default=E},700:function(e,t,n){"use strict";n(87),n(701),n(248)},701:function(e,t,n){},705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(n(64)),o=b(n(68)),i=b(n(61)),a=b(n(65)),l=b(n(62)),s=b(n(63)),u=v(n(0)),c=v(n(2)),p=n(843),f=b(p),d=b(n(67)),m=b(n(706)),h=b(n(707)),g=b(n(9)),y=b(n(84));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},O={prefixCls:c.string,className:c.string,size:c.oneOf(["default","large","small"]),notFoundContent:c.any,showSearch:c.bool,optionLabelProp:c.string,transitionName:c.string,choiceTransitionName:c.string,id:c.string},S=function(e){function t(e){(0,i.default)(this,t);var n=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveSelect=function(e){n.rcSelect=e},n.renderSelect=function(e){var t,i=n.props,a=i.prefixCls,l=i.className,s=void 0===l?"":l,c=i.size,p=i.mode,m=w(i,["prefixCls","className","size","mode"]),h=(0,d.default)((t={},(0,o.default)(t,a+"-lg","large"===c),(0,o.default)(t,a+"-sm","small"===c),t),s),g=n.props.optionLabelProp;n.isCombobox()&&(g=g||"value");var v={multiple:"multiple"===p,tags:"tags"===p,combobox:n.isCombobox()},b=u.createElement(y.default,{type:"down",className:a+"-arrow-icon"}),O=u.createElement(y.default,{type:"close",className:a+"-remove-icon"}),S=u.createElement(y.default,{type:"check",className:a+"-selected-icon"});return u.createElement(f.default,(0,r.default)({inputIcon:b,removeIcon:O,menuItemSelectedIcon:S},m,v,{prefixCls:a,className:h,optionLabelProp:g||"children",notFoundContent:n.getNotFoundContent(e),ref:n.saveSelect}))},(0,g.default)("combobox"!==e.mode,"The combobox mode of Select is deprecated,it will be removed in next major version,please use AutoComplete instead"),n}return(0,s.default)(t,e),(0,a.default)(t,[{key:"focus",value:function(){this.rcSelect.focus()}},{key:"blur",value:function(){this.rcSelect.blur()}},{key:"getNotFoundContent",value:function(e){var t=this.props.notFoundContent;return this.isCombobox()?void 0===t?null:t:void 0===t?e.notFoundContent:t}},{key:"isCombobox",value:function(){var e=this.props.mode;return"combobox"===e||e===t.SECRET_COMBOBOX_MODE_DO_NOT_USE}},{key:"render",value:function(){return u.createElement(m.default,{componentName:"Select",defaultLocale:h.default.Select},this.renderSelect)}}]),t}(u.Component);t.default=S,S.Option=p.Option,S.OptGroup=p.OptGroup,S.SECRET_COMBOBOX_MODE_DO_NOT_USE="SECRET_COMBOBOX_MODE_DO_NOT_USE",S.defaultProps={prefixCls:"ant-select",showSearch:!1,transitionName:"slide-up",choiceTransitionName:"zoom"},S.propTypes=O,e.exports=t.default},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(64)),o=p(n(61)),i=p(n(65)),a=p(n(62)),l=p(n(63)),s=c(n(0)),u=c(n(2));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale,o=this.context.antLocale,i=o&&o[t];return(0,r.default)({},"function"==typeof n?n():n,i||{})}},{key:"getLocaleCode",value:function(){var e=this.context.antLocale,t=e&&e.locale;return e&&e.exist&&!t?"en-us":t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode())}}]),t}(s.Component);t.default=f,f.contextTypes={antLocale:u.object},e.exports=t.default},707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(708)),o=l(n(333)),i=l(n(334)),a=l(n(710));function l(e){return e&&e.__esModule?e:{default:e}}t.default={locale:"en",Pagination:r.default,DatePicker:o.default,TimePicker:i.default,Calendar:a.default,Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],notFoundContent:"Not Found",searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items"},Select:{notFoundContent:"Not Found"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file"}},e.exports=t.default},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={items_per_page:"/ page",jump_to:"Goto",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},e.exports=t.default},709:function(e,t,n){"use strict";t.__esModule=!0,t.default={today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},e.exports=t.default},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(333),i=(r=o)&&r.__esModule?r:{default:r};t.default=i.default,e.exports=t.default},843:function(e,t,n){"use strict";n.r(t);var r=n(64),o=n.n(r),i=n(61),a=n.n(i),l=n(62),s=n.n(l),u=n(63),c=n.n(u),p=n(0),f=n.n(p),d=n(4),m=n.n(d),h=n(10),g=n(183);function y(e){var t=[];return f.a.Children.forEach(e,function(e){t.push(e)}),t}var v=n(67),b=n.n(v),w=n(207),O=n(293),S=n.n(O),P=n(175),_=n(9),E=n.n(_),x=n(2),C=n.n(x),k=function(e){function t(){return a()(this,t),s()(this,e.apply(this,arguments))}return c()(t,e),t}(f.a.Component);k.propTypes={value:C.a.oneOfType([C.a.string,C.a.number])},k.isSelectOption=!0;var T=k;function j(e){return"string"==typeof e?e:null}function M(e){if(!e)return null;var t=e.props;if("value"in t)return t.value;if(e.key)return e.key;if(e.type&&e.type.isSelectOptGroup&&t.label)return t.label;throw new Error("Need at least a key or a value or a label (only for OptGroup) for "+e)}function I(e,t){return"value"===t?M(e):e.props[t]}function N(e){return e.combobox}function D(e){return e.multiple||e.tags}function R(e){return D(e)||N(e)}function V(e){return!R(e)}function A(e){var t=e;return void 0===e?t=[]:Array.isArray(e)||(t=[e]),t}function F(e){return typeof e+"-"+e}function L(e){e.preventDefault()}function z(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r]===t){n=r;break}return n}var W={userSelect:"none",WebkitUserSelect:"none"},B={unselectable:"on"};function G(e,t){return!t.props.disabled&&A(I(t,this.props.optionFilterProp)).join("").toLowerCase().indexOf(e.toLowerCase())>-1}function H(e,t){return function(n){e[t]=n}}var U=n(79),Y=n.n(U),K=n(276),X=n(295),q=n.n(X),Q=n(160),J=n.n(Q),$=function(e){function t(n){a()(this,t);var r=s()(this,e.call(this,n));return r.scrollActiveItemToView=function(){var e=Object(d.findDOMNode)(r.firstActiveItem),t=r.props,n=t.value,o=t.visible,i=t.firstActiveValue;if(e&&o){var a={onlyScrollIfNeeded:!0};n&&0!==n.length||!i||(a.alignWithTop=!0),r.rafInstance=J()(function(){q()(e,Object(d.findDOMNode)(r.menuRef),a)})}},r.lastInputValue=n.inputValue,r.saveMenuRef=H(r,"menuRef"),r}return c()(t,e),t.prototype.componentDidMount=function(){this.scrollActiveItemToView(),this.lastVisible=this.props.visible},t.prototype.shouldComponentUpdate=function(e){return e.visible||(this.lastVisible=!1),e.visible||e.inputValue!==this.props.inputValue},t.prototype.componentDidUpdate=function(e){var t=this.props;!e.visible&&t.visible&&this.scrollActiveItemToView(),this.lastVisible=t.visible,this.lastInputValue=t.inputValue},t.prototype.componentWillUnmount=function(){this.rafInstance&&this.rafInstance.cancel&&this.rafInstance.cancel()},t.prototype.renderMenu=function(){var e=this,t=this.props,n=t.menuItems,r=t.menuItemSelectedIcon,i=t.defaultActiveFirstOption,a=t.value,l=t.prefixCls,s=t.multiple,u=t.onMenuSelect,c=t.inputValue,d=t.firstActiveValue,m=t.backfillValue;if(n&&n.length){var h={};s?(h.onDeselect=t.onMenuDeselect,h.onSelect=u):h.onClick=u;var g=function e(t,n){if(null==n)return[];var r=[];return f.a.Children.forEach(t,function(t){if(t.type.isMenuItemGroup)r=r.concat(e(t.props.children,n));else{var o=M(t),i=t.key;-1!==z(n,o)&&i&&r.push(i)}}),r}(n,a),v={},b=n;if(g.length||d){t.visible&&!this.lastVisible&&(v.activeKey=g[0]||d);var w=!1,O=function(t){return!w&&-1!==g.indexOf(t.key)||!w&&!g.length&&-1!==d.indexOf(t.key)?(w=!0,Object(p.cloneElement)(t,{ref:function(t){e.firstActiveItem=t}})):t};b=n.map(function(e){if(e.type.isMenuItemGroup){var t=y(e.props.children).map(O);return Object(p.cloneElement)(e,{},t)}return O(e)})}else this.firstActiveItem=null;var S=a&&a[a.length-1];return c===this.lastInputValue||S&&S===m||(v.activeKey=""),f.a.createElement(P.default,o()({ref:this.saveMenuRef,style:this.props.dropdownMenuStyle,defaultActiveFirst:i,role:"listbox",itemIcon:s?r:null},v,{multiple:s},h,{selectedKeys:g,prefixCls:l+"-menu"}),b)}return null},t.prototype.render=function(){var e=this.renderMenu();return e?f.a.createElement("div",{style:{overflow:"auto",transform:"translateZ(0)"},onFocus:this.props.onPopupFocus,onMouseDown:L,onScroll:this.props.onPopupScroll},e):null},t}(f.a.Component);$.displayName="DropdownMenu",$.propTypes={defaultActiveFirstOption:C.a.bool,value:C.a.any,dropdownMenuStyle:C.a.object,multiple:C.a.bool,onPopupFocus:C.a.func,onPopupScroll:C.a.func,onMenuDeSelect:C.a.func,onMenuSelect:C.a.func,prefixCls:C.a.string,menuItems:C.a.any,inputValue:C.a.string,visible:C.a.bool,firstActiveValue:C.a.string,menuItemSelectedIcon:C.a.oneOfType([C.a.func,C.a.node])};var Z=$;K.a.displayName="Trigger";var ee={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}},te=function(e){function t(n){a()(this,t);var r=s()(this,e.call(this,n));return ne.call(r),r.saveDropdownMenuRef=H(r,"dropdownMenuRef"),r.saveTriggerRef=H(r,"triggerRef"),r.state={dropdownWidth:null},r}return c()(t,e),t.prototype.componentDidMount=function(){this.setDropdownWidth()},t.prototype.componentDidUpdate=function(){this.setDropdownWidth()},t.prototype.render=function(){var e,t=this.props,n=t.onPopupFocus,r=Y()(t,["onPopupFocus"]),i=r.multiple,a=r.visible,l=r.inputValue,s=r.dropdownAlign,u=r.disabled,c=r.showSearch,p=r.dropdownClassName,d=r.dropdownStyle,m=r.dropdownMatchSelectWidth,h=this.getDropdownPrefixCls(),g=((e={})[p]=!!p,e[h+"--"+(i?"multiple":"single")]=1,e),y=this.getDropdownElement({menuItems:r.options,onPopupFocus:n,multiple:i,inputValue:l,visible:a}),v=void 0;v=u?[]:V(r)&&!c?["click"]:["blur"];var w=o()({},d),O=m?"width":"minWidth";return this.state.dropdownWidth&&(w[O]=this.state.dropdownWidth+"px"),f.a.createElement(K.a,o()({},r,{showAction:u?[]:this.props.showAction,hideAction:v,ref:this.saveTriggerRef,popupPlacement:"bottomLeft",builtinPlacements:ee,prefixCls:h,popupTransitionName:this.getDropdownTransitionName(),onPopupVisibleChange:r.onDropdownVisibleChange,popup:y,popupAlign:s,popupVisible:a,getPopupContainer:r.getPopupContainer,popupClassName:b()(g),popupStyle:w}),r.children)},t}(f.a.Component);te.propTypes={onPopupFocus:C.a.func,onPopupScroll:C.a.func,dropdownMatchSelectWidth:C.a.bool,dropdownAlign:C.a.object,visible:C.a.bool,disabled:C.a.bool,showSearch:C.a.bool,dropdownClassName:C.a.string,multiple:C.a.bool,inputValue:C.a.string,filterOption:C.a.any,options:C.a.any,prefixCls:C.a.string,popupClassName:C.a.string,children:C.a.any,showAction:C.a.arrayOf(C.a.string),menuItemSelectedIcon:C.a.oneOfType([C.a.func,C.a.node])};var ne=function(){var e=this;this.setDropdownWidth=function(){if(e.props.dropdownMatchSelectWidth){var t=m.a.findDOMNode(e).offsetWidth;t!==e.state.dropdownWidth&&e.setState({dropdownWidth:t})}},this.getInnerMenu=function(){return e.dropdownMenuRef&&e.dropdownMenuRef.menuRef},this.getPopupDOMNode=function(){return e.triggerRef.getPopupDomNode()},this.getDropdownElement=function(t){var n=e.props;return f.a.createElement(Z,o()({ref:e.saveDropdownMenuRef},t,{prefixCls:e.getDropdownPrefixCls(),onMenuSelect:n.onMenuSelect,onMenuDeselect:n.onMenuDeselect,onPopupScroll:n.onPopupScroll,value:n.value,backfillValue:n.backfillValue,firstActiveValue:n.firstActiveValue,defaultActiveFirstOption:n.defaultActiveFirstOption,dropdownMenuStyle:n.dropdownMenuStyle,menuItemSelectedIcon:n.menuItemSelectedIcon}))},this.getDropdownTransitionName=function(){var t=e.props,n=t.transitionName;return!n&&t.animation&&(n=e.getDropdownPrefixCls()+"-"+t.animation),n},this.getDropdownPrefixCls=function(){return e.props.prefixCls+"-dropdown"}},re=te;function oe(e,t,n){var r=C.a.oneOfType([C.a.string,C.a.number]),o=C.a.shape({key:r.isRequired,label:C.a.node});return e.labelInValue?C.a.oneOfType([C.a.arrayOf(o),o]).apply(void 0,arguments)?new Error("Invalid prop `"+t+"` supplied to `"+n+"`, when you set `labelInValue` to `true`, `"+t+"` should in shape of `{ key: string | number, label?: ReactNode }`."):void 0:("multiple"===e.mode||"tags"===e.mode||e.multiple||e.tags)&&""===e[t]?new Error("Invalid prop `"+t+"` of type `string` supplied to `"+n+"`, expected `array` when `multiple` or `tags` is `true`."):C.a.oneOfType([C.a.arrayOf(r),r]).apply(void 0,arguments)}te.displayName="SelectTrigger";var ie={id:C.a.string,defaultActiveFirstOption:C.a.bool,multiple:C.a.bool,filterOption:C.a.any,children:C.a.any,showSearch:C.a.bool,disabled:C.a.bool,allowClear:C.a.bool,showArrow:C.a.bool,tags:C.a.bool,prefixCls:C.a.string,className:C.a.string,transitionName:C.a.string,optionLabelProp:C.a.string,optionFilterProp:C.a.string,animation:C.a.string,choiceTransitionName:C.a.string,onChange:C.a.func,onBlur:C.a.func,onFocus:C.a.func,onSelect:C.a.func,onSearch:C.a.func,onPopupScroll:C.a.func,onMouseEnter:C.a.func,onMouseLeave:C.a.func,onInputKeyDown:C.a.func,placeholder:C.a.any,onDeselect:C.a.func,labelInValue:C.a.bool,value:oe,defaultValue:oe,dropdownStyle:C.a.object,maxTagTextLength:C.a.number,maxTagCount:C.a.number,maxTagPlaceholder:C.a.oneOfType([C.a.node,C.a.func]),tokenSeparators:C.a.arrayOf(C.a.string),getInputElement:C.a.func,showAction:C.a.arrayOf(C.a.string),clearIcon:C.a.node,inputIcon:C.a.node,removeIcon:C.a.node,menuItemSelectedIcon:C.a.oneOfType([C.a.func,C.a.node])};function ae(){}var le=function(e){function t(n){a()(this,t);var r=s()(this,e.call(this,n));se.call(r);var o=t.getOptionsInfoFromProps(n);return r.state={value:t.getValueFromProps(n,!0),inputValue:n.combobox?t.getInputValueForCombobox(n,o,!0):"",open:n.defaultOpen,optionsInfo:o,skipBuildOptionsInfo:!0},r.saveInputRef=H(r,"inputRef"),r.saveInputMirrorRef=H(r,"inputMirrorRef"),r.saveTopCtrlRef=H(r,"topCtrlRef"),r.saveSelectTriggerRef=H(r,"selectTriggerRef"),r.saveRootRef=H(r,"rootRef"),r.saveSelectionRef=H(r,"selectionRef"),r}return c()(t,e),t.prototype.componentDidMount=function(){this.props.autoFocus&&this.focus()},t.prototype.componentDidUpdate=function(){if(D(this.props)){var e=this.getInputDOMNode(),t=this.getInputMirrorDOMNode();e.value?(e.style.width="",e.style.width=t.clientWidth+"px"):e.style.width=""}this.forcePopupAlign()},t.prototype.componentWillUnmount=function(){this.clearFocusTime(),this.clearBlurTime(),this.dropdownContainer&&(m.a.unmountComponentAtNode(this.dropdownContainer),document.body.removeChild(this.dropdownContainer),this.dropdownContainer=null)},t.prototype.focus=function(){V(this.props)?this.selectionRef.focus():this.getInputDOMNode().focus()},t.prototype.blur=function(){V(this.props)?this.selectionRef.blur():this.getInputDOMNode().blur()},t.prototype.renderClear=function(){var e=this.props,t=e.prefixCls,n=e.allowClear,r=e.clearIcon,i=this.state,a=i.value,l=i.inputValue,s=f.a.createElement("span",o()({key:"clear",className:t+"-selection__clear",onMouseDown:L,style:W},B,{onClick:this.onClearSelection}),r||f.a.createElement("i",{className:t+"-selection__clear-icon"},"×"));return n?N(this.props)?l?s:null:l||a.length?s:null:null},t.prototype.render=function(){var e,t=this.props,n=D(t),r=this.state,i=t.className,a=t.disabled,l=t.prefixCls,s=t.inputIcon,u=this.renderTopControlNode(),c=this.state.open;c&&(this._options=this.renderFilterOptions());var p=this.getRealOpenState(),d=this._options||[],m={};for(var h in t)!t.hasOwnProperty(h)||"data-"!==h.substr(0,5)&&"aria-"!==h.substr(0,5)&&"role"!==h||(m[h]=t[h]);var g=o()({},m);R(t)||(g=o()({},g,{onKeyDown:this.onKeyDown,tabIndex:t.disabled?-1:0}));var y=((e={})[i]=!!i,e[l]=1,e[l+"-open"]=c,e[l+"-focused"]=c||!!this._focused,e[l+"-combobox"]=N(t),e[l+"-disabled"]=a,e[l+"-enabled"]=!a,e[l+"-allow-clear"]=!!t.allowClear,e[l+"-no-arrow"]=!t.showArrow,e);return f.a.createElement(re,{onPopupFocus:this.onPopupFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,dropdownAlign:t.dropdownAlign,dropdownClassName:t.dropdownClassName,dropdownMatchSelectWidth:t.dropdownMatchSelectWidth,defaultActiveFirstOption:t.defaultActiveFirstOption,dropdownMenuStyle:t.dropdownMenuStyle,transitionName:t.transitionName,animation:t.animation,prefixCls:t.prefixCls,dropdownStyle:t.dropdownStyle,combobox:t.combobox,showSearch:t.showSearch,options:d,multiple:n,disabled:a,visible:p,inputValue:r.inputValue,value:r.value,backfillValue:r.backfillValue,firstActiveValue:t.firstActiveValue,onDropdownVisibleChange:this.onDropdownVisibleChange,getPopupContainer:t.getPopupContainer,onMenuSelect:this.onMenuSelect,onMenuDeselect:this.onMenuDeselect,onPopupScroll:t.onPopupScroll,showAction:t.showAction,ref:this.saveSelectTriggerRef,menuItemSelectedIcon:t.menuItemSelectedIcon},f.a.createElement("div",{id:t.id,style:t.style,ref:this.saveRootRef,onBlur:this.onOuterBlur,onFocus:this.onOuterFocus,className:b()(y)},f.a.createElement("div",o()({ref:this.saveSelectionRef,key:"selection",className:l+"-selection\n            "+l+"-selection--"+(n?"multiple":"single"),role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":p},g),u,this.renderClear(),n||!t.showArrow?null:f.a.createElement("span",o()({key:"arrow",className:l+"-arrow",style:W},B,{onClick:this.onArrowClick}),s||f.a.createElement("i",{className:l+"-arrow-icon"})))))},t}(f.a.Component);le.propTypes=ie,le.defaultProps={prefixCls:"rc-select",defaultOpen:!1,labelInValue:!1,defaultActiveFirstOption:!0,showSearch:!0,allowClear:!1,placeholder:"",onChange:ae,onFocus:ae,onBlur:ae,onSelect:ae,onSearch:ae,onDeselect:ae,onInputKeyDown:ae,showArrow:!0,dropdownMatchSelectWidth:!0,dropdownStyle:{},dropdownMenuStyle:{},optionFilterProp:"value",optionLabelProp:"value",notFoundContent:"Not Found",backfill:!1,showAction:["click"],tokenSeparators:[],autoClearSearchValue:!0},le.getDerivedStateFromProps=function(e,t){var n=t.skipBuildOptionsInfo?t.optionsInfo:le.getOptionsInfoFromProps(e,t),r={optionsInfo:n,skipBuildOptionsInfo:!1};if("open"in e&&(r.open=e.open),"value"in e){var o=le.getValueFromProps(e);r.value=o,e.combobox&&(r.inputValue=le.getInputValueForCombobox(e,n))}return r},le.getOptionsFromChildren=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.a.Children.forEach(e,function(e){e&&(e.type.isSelectOptGroup?le.getOptionsFromChildren(e.props.children,t):t.push(e))}),t},le.getInputValueForCombobox=function(e,t,n){var r=[];if("value"in e&&!n&&(r=A(e.value)),"defaultValue"in e&&n&&(r=A(e.defaultValue)),!r.length)return"";var o=r=r[0];return e.labelInValue?o=r.label:t[F(r)]&&(o=t[F(r)].label),void 0===o&&(o=""),o},le.getLabelFromOption=function(e,t){return I(t,e.optionLabelProp)},le.getOptionsInfoFromProps=function(e,t){var n=le.getOptionsFromChildren(e.children),r={};if(n.forEach(function(t){var n=M(t);r[F(n)]={option:t,value:n,label:le.getLabelFromOption(e,t),title:t.props.title}}),t){var o=t.optionsInfo;t.value.forEach(function(e){var t=F(e);r[t]||void 0===o[t]||(r[t]=o[t])})}return r},le.getValueFromProps=function(e,t){var n=[];return"value"in e&&!t&&(n=A(e.value)),"defaultValue"in e&&t&&(n=A(e.defaultValue)),e.labelInValue&&(n=n.map(function(e){return e.key})),n};var se=function(){var e=this;this.onInputChange=function(t){var n=e.props.tokenSeparators,r=t.target.value;if(D(e.props)&&n.length&&function(e,t){for(var n=0;n<t.length;++n)if(e.lastIndexOf(t[n])>0)return!0;return!1}(r,n)){var o=e.getValueByInput(r);return void 0!==o&&e.fireChange(o),e.setOpenState(!1,!0),void e.setInputValue("",!1)}e.setInputValue(r),e.setState({open:!0}),N(e.props)&&e.fireChange([r])},this.onDropdownVisibleChange=function(t){t&&!e._focused&&(e.clearBlurTime(),e.timeoutFocus(),e._focused=!0,e.updateFocusClassName()),e.setOpenState(t)},this.onKeyDown=function(t){if(!e.props.disabled){var n=t.keyCode;e.state.open&&!e.getInputDOMNode()?e.onInputKeyDown(t):n!==g.a.ENTER&&n!==g.a.DOWN||(e.setOpenState(!0),t.preventDefault())}},this.onInputKeyDown=function(t){var n=e.props;if(!n.disabled){var r=e.state,o=t.keyCode;if(!D(n)||t.target.value||o!==g.a.BACKSPACE){if(o===g.a.DOWN){if(!r.open)return e.openIfHasChildren(),t.preventDefault(),void t.stopPropagation()}else if(o===g.a.ENTER&&r.open)t.preventDefault();else if(o===g.a.ESC)return void(r.open&&(e.setOpenState(!1),t.preventDefault(),t.stopPropagation()));if(e.getRealOpenState(r)){var i=e.selectTriggerRef.getInnerMenu();i&&i.onKeyDown(t,e.handleBackfill)&&(t.preventDefault(),t.stopPropagation())}}else{t.preventDefault();var a=r.value;a.length&&e.removeSelected(a[a.length-1])}}},this.onMenuSelect=function(t){var n=t.item;if(n){var r=e.state.value,o=e.props,i=M(n),a=r[r.length-1];if(e.fireSelect(i),D(o)){if(-1!==z(r,i))return;r=r.concat([i])}else{if(void 0!==a&&a===i&&i!==e.state.backfillValue)return void e.setOpenState(!1,!0);r=[i],e.setOpenState(!1,!0)}e.fireChange(r);var l=void 0;l=N(o)?I(n,o.optionLabelProp):"",o.autoClearSearchValue&&e.setInputValue(l,!1)}},this.onMenuDeselect=function(t){var n=t.item,r=t.domEvent;"keydown"!==r.type||r.keyCode!==g.a.ENTER?("click"===r.type&&e.removeSelected(M(n)),e.props.autoClearSearchValue&&e.setInputValue("",!1)):e.removeSelected(M(n))},this.onArrowClick=function(t){t.stopPropagation(),t.preventDefault(),e.props.disabled||e.setOpenState(!e.state.open,!e.state.open)},this.onPlaceholderClick=function(){e.getInputDOMNode()&&e.getInputDOMNode().focus()},this.onOuterFocus=function(t){e.props.disabled?t.preventDefault():(e.clearBlurTime(),(R(e.props)||t.target!==e.getInputDOMNode())&&(e._focused||(e._focused=!0,e.updateFocusClassName(),e.timeoutFocus())))},this.onPopupFocus=function(){e.maybeFocus(!0,!0)},this.onOuterBlur=function(t){e.props.disabled?t.preventDefault():e.blurTimer=setTimeout(function(){e._focused=!1,e.updateFocusClassName();var t=e.props,n=e.state.value,r=e.state.inputValue;if(V(t)&&t.showSearch&&r&&t.defaultActiveFirstOption){var o=e._options||[];if(o.length){var i=function e(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.type.isMenuItemGroup){var o=e(r.props.children);if(o)return o}else if(!r.props.disabled)return r}return null}(o);i&&(n=[M(i)],e.fireChange(n))}}else D(t)&&r&&(e.state.inputValue=e.getInputDOMNode().value="",void 0!==(n=e.getValueByInput(r))&&e.fireChange(n));e.setOpenState(!1),t.onBlur(e.getVLForOnChange(n))},10)},this.onClearSelection=function(t){var n=e.props,r=e.state;if(!n.disabled){var o=r.inputValue,i=r.value;t.stopPropagation(),(o||i.length)&&(i.length&&e.fireChange([]),e.setOpenState(!1,!0),o&&e.setInputValue(""))}},this.onChoiceAnimationLeave=function(){e.forcePopupAlign()},this.getOptionInfoBySingleValue=function(t,n){var r=void 0;if((n=n||e.state.optionsInfo)[F(t)]&&(r=n[F(t)]),r)return r;var o=t;if(e.props.labelInValue){var i=function(e,t){var n=void 0;e=A(e);for(var r=0;r<e.length;r++)if(e[r].key===t){n=e[r].label;break}return n}(e.props.value,t);void 0!==i&&(o=i)}return{option:f.a.createElement(T,{value:t,key:t},t),value:t,label:o}},this.getOptionBySingleValue=function(t){return e.getOptionInfoBySingleValue(t).option},this.getOptionsBySingleValue=function(t){return t.map(function(t){return e.getOptionBySingleValue(t)})},this.getValueByLabel=function(t){if(void 0===t)return null;var n=null;return Object.keys(e.state.optionsInfo).forEach(function(r){var o=e.state.optionsInfo[r];A(o.label).join("")===t&&(n=o.value)}),n},this.getVLBySingleValue=function(t){return e.props.labelInValue?{key:t,label:e.getLabelBySingleValue(t)}:t},this.getVLForOnChange=function(t){var n=t;return void 0!==n?(n=e.props.labelInValue?n.map(function(t){return{key:t,label:e.getLabelBySingleValue(t)}}):n.map(function(e){return e}),D(e.props)?n:n[0]):n},this.getLabelBySingleValue=function(t,n){return e.getOptionInfoBySingleValue(t,n).label},this.getDropdownContainer=function(){return e.dropdownContainer||(e.dropdownContainer=document.createElement("div"),document.body.appendChild(e.dropdownContainer)),e.dropdownContainer},this.getPlaceholderElement=function(){var t=e.props,n=e.state,r=!1;n.inputValue&&(r=!0),n.value.length&&(r=!0),N(t)&&1===n.value.length&&!n.value[0]&&(r=!1);var i=t.placeholder;return i?f.a.createElement("div",o()({onMouseDown:L,style:o()({display:r?"none":"block"},W)},B,{onClick:e.onPlaceholderClick,className:t.prefixCls+"-selection__placeholder"}),i):null},this.getInputElement=function(){var t,n=e.props,r=n.getInputElement?n.getInputElement():f.a.createElement("input",{id:n.id,autoComplete:"off"}),o=b()(r.props.className,((t={})[n.prefixCls+"-search__field"]=!0,t));return f.a.createElement("div",{className:n.prefixCls+"-search__field__wrap"},f.a.cloneElement(r,{ref:e.saveInputRef,onChange:e.onInputChange,onKeyDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=0;o<t.length;o++)t[o]&&"function"==typeof t[o]&&t[o].apply(this,n)}}(e.onInputKeyDown,r.props.onKeyDown,e.props.onInputKeyDown),value:e.state.inputValue,disabled:n.disabled,className:o}),f.a.createElement("span",{ref:e.saveInputMirrorRef,className:n.prefixCls+"-search__field__mirror"},e.state.inputValue," "))},this.getInputDOMNode=function(){return e.topCtrlRef?e.topCtrlRef.querySelector("input,textarea,div[contentEditable]"):e.inputRef},this.getInputMirrorDOMNode=function(){return e.inputMirrorRef},this.getPopupDOMNode=function(){return e.selectTriggerRef.getPopupDOMNode()},this.getPopupMenuComponent=function(){return e.selectTriggerRef.getInnerMenu()},this.setOpenState=function(t,n){var r=e.props;if(e.state.open!==t){e.props.onDropdownVisibleChange&&e.props.onDropdownVisibleChange(t);var o={open:t,backfillValue:void 0};!t&&V(r)&&r.showSearch&&e.setInputValue("",!1),t||e.maybeFocus(t,n),e.setState(o,function(){t&&e.maybeFocus(t,n)})}else e.maybeFocus(t,n)},this.setInputValue=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==e.state.inputValue&&(e.setState({inputValue:t},e.forcePopupAlign),n&&e.props.onSearch(t))},this.getValueByInput=function(t){var n=e.props,r=n.multiple,o=n.tokenSeparators,i=e.state.value,a=!1;return function(e,t){var n=new RegExp("["+t.join()+"]");return e.split(n).filter(function(e){return e})}(t,o).forEach(function(t){var n=[t];if(r){var o=e.getValueByLabel(t);o&&-1===z(i,o)&&(i=i.concat(o),a=!0,e.fireSelect(o))}else-1===z(i,t)&&(i=i.concat(n),a=!0,e.fireSelect(t))}),a?i:void 0},this.getRealOpenState=function(t){var n=(t||e.state).open,r=e._options||[];return!R(e.props)&&e.props.showSearch||n&&!r.length&&(n=!1),n},this.handleBackfill=function(t){if(e.props.backfill&&(V(e.props)||N(e.props))){var n=M(t);N(e.props)&&e.setInputValue(n,!1),e.setState({value:[n],backfillValue:n})}},this.filterOption=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G,o=e.state.value,i=o[o.length-1];if(!t||i&&i===e.state.backfillValue)return!0;var a=e.props.filterOption;return"filterOption"in e.props?!0===e.props.filterOption&&(a=r):a=r,!a||("function"==typeof a?a.call(e,t,n):!n.props.disabled)},this.timeoutFocus=function(){e.focusTimer&&e.clearFocusTime(),e.focusTimer=setTimeout(function(){e.props.onFocus()},10)},this.clearFocusTime=function(){e.focusTimer&&(clearTimeout(e.focusTimer),e.focusTimer=null)},this.clearBlurTime=function(){e.blurTimer&&(clearTimeout(e.blurTimer),e.blurTimer=null)},this.updateFocusClassName=function(){var t=e.rootRef,n=e.props;e._focused?S()(t).add(n.prefixCls+"-focused"):S()(t).remove(n.prefixCls+"-focused")},this.maybeFocus=function(t,n){if(n||t){var r=e.getInputDOMNode(),o=document.activeElement;r&&(t||R(e.props))?o!==r&&(r.focus(),e._focused=!0):o!==e.selectionRef&&(e.selectionRef.focus(),e._focused=!0)}},this.removeSelected=function(t,n){var r=e.props;if(!r.disabled&&!e.isChildDisabled(t)){n&&n.stopPropagation&&n.stopPropagation();var o=e.state.value.filter(function(e){return e!==t});if(D(r)){var i=t;r.labelInValue&&(i={key:t,label:e.getLabelBySingleValue(t)}),r.onDeselect(i,e.getOptionBySingleValue(t))}e.fireChange(o)}},this.openIfHasChildren=function(){var t=e.props;(f.a.Children.count(t.children)||V(t))&&e.setOpenState(!0)},this.fireSelect=function(t){e.props.onSelect(e.getVLBySingleValue(t),e.getOptionBySingleValue(t))},this.fireChange=function(t){var n=e.props;"value"in n||e.setState({value:t},e.forcePopupAlign);var r=e.getVLForOnChange(t),o=e.getOptionsBySingleValue(t);n.onChange(r,D(e.props)?o:o[0])},this.isChildDisabled=function(t){return y(e.props.children).some(function(e){return M(e)===t&&e.props&&e.props.disabled})},this.forcePopupAlign=function(){e.state.open&&e.selectTriggerRef.triggerRef.forcePopupAlign()},this.renderFilterOptions=function(){var t=e.state.inputValue,n=e.props,r=n.children,o=n.tags,i=n.filterOption,a=n.notFoundContent,l=[],s=[],u=e.renderFilterOptionsFromChildren(r,s,l);if(o){var c=e.state.value;if((c=c.filter(function(e){return-1===s.indexOf(e)&&(!t||String(e).indexOf(String(t))>-1)})).forEach(function(e){var t=e,n=f.a.createElement(P.Item,{style:W,role:"option",attribute:B,value:t,key:t},t);u.push(n),l.push(n)}),t)l.every(function(n){var r=function(){return M(n)===t};return!1!==i?!e.filterOption.call(e,t,n,r):!r()})&&u.unshift(f.a.createElement(P.Item,{style:W,role:"option",attribute:B,value:t,key:t},t))}return!u.length&&a&&(u=[f.a.createElement(P.Item,{style:W,attribute:B,disabled:!0,role:"option",value:"NOT_FOUND",key:"NOT_FOUND"},a)]),u},this.renderFilterOptionsFromChildren=function(t,n,r){var i=[],a=e.props,l=e.state.inputValue,s=a.tags;return f.a.Children.forEach(t,function(t){if(t)if(t.type.isSelectOptGroup){var a=e.renderFilterOptionsFromChildren(t.props.children,n,r);if(a.length){var u=t.props.label,c=t.key;c||"string"!=typeof u?!u&&c&&(u=c):c=u,i.push(f.a.createElement(P.ItemGroup,{key:c,title:u},a))}}else{E()(t.type.isSelectOption,"the children of `Select` should be `Select.Option` or `Select.OptGroup`, instead of `"+(t.type.name||t.type.displayName||t.type)+"`.");var p=M(t);if(function(e,t){if(!V(t)&&!function(e){return e.multiple}(t)&&"string"!=typeof e)throw new Error("Invalid `value` of type `"+typeof e+"` supplied to Option, expected `string` when `tags/combobox` is `true`.")}(p,e.props),e.filterOption(l,t)){var d=f.a.createElement(P.Item,o()({style:W,attribute:B,value:p,key:p,role:"option"},t.props));i.push(d),r.push(d)}s&&n.push(p)}}),i},this.renderTopControlNode=function(){var t=e.state,n=t.value,r=t.open,i=t.inputValue,a=e.props,l=a.choiceTransitionName,s=a.prefixCls,u=a.maxTagTextLength,c=a.maxTagCount,p=a.maxTagPlaceholder,d=a.showSearch,m=a.removeIcon,h=s+"-selection__rendered",g=null;if(V(a)){var y=null;if(n.length){var v=!1,b=1;d&&r?(v=!i)&&(b=.4):v=!0;var O=n[0],S=e.getOptionInfoBySingleValue(O),P=S.label,_=S.title;y=f.a.createElement("div",{key:"value",className:s+"-selection-selected-value",title:j(_||P),style:{display:v?"block":"none",opacity:b}},P)}g=d?[y,f.a.createElement("div",{className:s+"-search "+s+"-search--inline",key:"input",style:{display:r?"block":"none"}},e.getInputElement())]:[y]}else{var E=[],x=n,C=void 0;if(void 0!==c&&n.length>c){x=x.slice(0,c);var k=e.getVLForOnChange(n.slice(c,n.length)),T="+ "+(n.length-c)+" ...";p&&(T="function"==typeof p?p(k):p),C=f.a.createElement("li",o()({style:W},B,{onMouseDown:L,className:s+"-selection__choice "+s+"-selection__choice__disabled",key:"maxTagPlaceholder",title:j(T)}),f.a.createElement("div",{className:s+"-selection__choice__content"},T))}D(a)&&(E=x.map(function(t){var n=e.getOptionInfoBySingleValue(t),r=n.label,i=n.title||r;u&&"string"==typeof r&&r.length>u&&(r=r.slice(0,u)+"...");var a=e.isChildDisabled(t),l=a?s+"-selection__choice "+s+"-selection__choice__disabled":s+"-selection__choice";return f.a.createElement("li",o()({style:W},B,{onMouseDown:L,className:l,key:t,title:j(i)}),f.a.createElement("div",{className:s+"-selection__choice__content"},r),a?null:f.a.createElement("span",{onClick:function(n){e.removeSelected(t,n)},className:s+"-selection__choice__remove"},m||f.a.createElement("i",{className:s+"-selection__choice__remove-icon"},"×")))})),C&&E.push(C),E.push(f.a.createElement("li",{className:s+"-search "+s+"-search--inline",key:"__input"},e.getInputElement())),g=D(a)&&l?f.a.createElement(w.default,{onLeave:e.onChoiceAnimationLeave,component:"ul",transitionName:l},E):f.a.createElement("ul",null,E)}return f.a.createElement("div",{className:h,ref:e.saveTopCtrlRef},e.getPlaceholderElement(),g)}};le.displayName="Select",Object(h.polyfill)(le);var ue=le,ce=function(e){function t(){return a()(this,t),s()(this,e.apply(this,arguments))}return c()(t,e),t}(f.a.Component);ce.isSelectOptGroup=!0;var pe=ce;n.d(t,"Option",function(){return T}),n.d(t,"OptGroup",function(){return pe}),n.d(t,"SelectPropTypes",function(){return ie}),ue.Option=T,ue.OptGroup=pe;t.default=ue}}]);
//# sourceMappingURL=component---web-pages-demo-tsx-ac453043b015c8ad6419.js.map