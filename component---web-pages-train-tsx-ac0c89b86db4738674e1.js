(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{119:function(e,t,n){"use strict";var r;function o(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    text-align: center;\n    font-size: 19px;\n"]);return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=t.ColoredText=void 0,n(120);var a=((r=n(91))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"Logo__ColoredText",componentId:"sc-1ib5m8j-0"})(["font-weight:bold;color:#1890ff;display:inline-block;text-decoration:none;background-image:linear-gradient(to right,#1890ff 25%,#c4ce35 50%,#ac24e2 75%,#1890ff 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;background-size:300% auto;&.static{background-position:-215% center;}&.animated{@keyframes text-gradient{to{background-position:-300% center;}}animation:text-gradient 16s ease-in-out infinite;}"]);t.ColoredText=a;var i=a.extend(o());t.Logo=i},127:function(e,t,n){var r;e.exports=(r=n(128))&&r.default||r},128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=c(n(2)),a=c(n(23)),i=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){var t=e.location,n=i.default.getResourcesForPathnameSync(t.pathname);return r.default.createElement(a.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}({location:t,pageResources:n},n.json))};l.propTypes={location:o.default.shape({pathname:o.default.string.isRequired}).isRequired};var u=l;t.default=u},144:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InnerPaddedContent=t.InnerContent=void 0,n(253);var o=f(n(254));n(149);var a=f(n(84));n(261);var i=f(n(262));n(120);var c=f(n(94)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),l=f(n(91)),u=n(119);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=i.default.Content,h=i.default.Footer,b=/^\/overview(\/.*)?$/i,v=/^\/demo(\/.*)?$/i,w=/^\/train(\/.*)?$/i,O=(0,l.default)(y).withConfig({displayName:"Layout__InnerContent",componentId:"sc-11gw4mw-0"})(["> p{text-align:justify;}background:#fcfcfc;min-height:'95vh';"]);t.InnerContent=O;var S=(0,l.default)(O).withConfig({displayName:"Layout__InnerPaddedContent",componentId:"sc-11gw4mw-1"})(["padding:28px 28px 28px 52px;"]);t.InnerPaddedContent=S;var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,g(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,s.Component),n=t,(r=[{key:"render",value:function(){var e="-1";b.test(this.props.location.pathname)?e="0":w.test(this.props.location.pathname)?e="1":v.test(this.props.location.pathname)&&(e="2");var t=this.props.addPadding?S:O;return s.createElement(i.default,{style:{minHeight:"100vh"}},s.createElement(i.default,{style:{flexDirection:"row"}},s.createElement(i.default.Sider,{width:200,breakpoint:"lg",collapsedWidth:"0",theme:"light",style:{backgroundColor:"#fcfcfc"}},s.createElement(u.Logo,{style:{textAlign:"center",width:200,padding:24},className:"static"},s.createElement(c.default,{to:"/"},"< Aida />")),s.createElement(o.default,{theme:"light",mode:"inline",defaultSelectedKeys:[e],style:{background:"#fcfcfc"}},s.createElement(o.default.Item,{key:"0"},s.createElement(c.default,{to:"/overview"},s.createElement(a.default,{type:"right-circle-o"}),"Overview")),s.createElement(o.default.Item,{key:"1"},s.createElement(c.default,{to:"/train"},s.createElement(a.default,{type:"right-circle-o"}),"Train assistant")),s.createElement(o.default.Item,{key:"2"},s.createElement(c.default,{to:"/demo"},s.createElement(a.default,{type:"right-circle-o"}),"Demo"))),s.createElement("div",{style:{padding:"24px",textAlign:"center"}},s.createElement("a",{href:"https://github.com/rodrigopivi/aida",title:"Aida",style:{fontSize:26}},s.createElement(a.default,{type:"github"})))),s.createElement(i.default,{style:{padding:"24px 0 0 24px"}},s.createElement(t,null,this.props.children),s.createElement(h,{style:{textAlign:"center"}},"Aida © 2018 Rodrigo Pimentel"))))}}])&&d(n.prototype,r),l&&d(n,l),t}();t.default=P},195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphql=function(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")},Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"withPrefix",{enumerable:!0,get:function(){return a.withPrefix}}),Object.defineProperty(t,"navigate",{enumerable:!0,get:function(){return a.navigate}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return a.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return a.replace}}),Object.defineProperty(t,"navigateTo",{enumerable:!0,get:function(){return a.navigateTo}}),Object.defineProperty(t,"waitForRouteChange",{enumerable:!0,get:function(){return i.waitForRouteChange}}),Object.defineProperty(t,"PageRenderer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return s.default}}),t.StaticQuery=t.StaticQueryContext=void 0;var r=l(n(0)),o=l(n(2)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(94)),i=n(21),c=l(n(127)),s=l(n(22));function l(e){return e&&e.__esModule?e:{default:e}}var u=r.default.createContext({});t.StaticQueryContext=u;var f=function(e){return r.default.createElement(u.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.default.createElement("div",null,"Loading (StaticQuery)")})};t.StaticQuery=f,f.propTypes={data:o.default.object,query:o.default.string.isRequired,render:o.default.func,children:o.default.func}},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipelineModel=void 0;t.PipelineModel=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}},276:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"FILTER_CHARS_REGEXP",/[^a-z0-9\.,\?\'"!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~ ]/gi),r(this,"WORD_SEPARATORS_REGEXP",/([\ \.\,\%\*\-\=\+\;\|\`\~])/g),r(this,"NON_ALPHANUMERIC_REGEXP",/[^a-z0-9]/gi),r(this,"UNKNOWN_NGRAM_KEY","__"),r(this,"NUMBERS_MAP",{zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9"}),r(this,"sanitizeSentence",function(e){return e.trim().toLowerCase().replace(t.FILTER_CHARS_REGEXP,"")}),r(this,"splitSentenceToWords",function(e){return t.sanitizeSentence(e).split(t.WORD_SEPARATORS_REGEXP).map(function(e){return e.trim()}).filter(function(e){return!!e})}),r(this,"splitWordToBiGrams",function(e){var t=[],n=e.length-2+1;if(n<1)return t;for(;n--;)t[n]=e.substr(n,2);return t}),r(this,"joinWordsToSentence",function(e){return e.join(" ")})};t.default=o},355:function(e,t){},357:function(e,t){},389:function(e,t){},390:function(e,t){},455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AidaPipeline=t.defaultPipelineDefinition=void 0;var r=s(n(276)),o=s(n(456)),a=n(457),i=s(n(462)),c=s(n(463));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,c,"next",e)}function c(e){l(a,r,o,i,c,"throw",e)}i(void 0)})}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={config:{classification:{epochs:5,filterSizes:[2,4,8],lowConfidenceThreshold:.3,numFilters:128},default:{batchSize:120,drop:.5,embeddingDimensions:300,lossThresholdToStopTraining:1e-6,maxNgrams:20,trainingValidationSplit:.3},ner:{addAttention:!0,epochs:5,lowConfidenceThreshold:.2,numFilters:[128,128],rnnUnits:100}}};t.defaultPipelineDefinition=d;t.AidaPipeline=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"pipelineDefinition",d),f(this,"datasetParams",void 0),f(this,"embeddingsModel",void 0),f(this,"classificationModel",void 0),f(this,"nerModel",void 0),f(this,"logger",void 0),f(this,"tokenizer",void 0),f(this,"train",(p=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.log("START TRAINING PIPELINE MODELS!"),n.logger.log("=================================================================================================="),e.next=4,n.classificationModel.train(t);case 4:if(!(Object.keys(n.datasetParams.slotsToId).length>=2)){e.next=10;break}return e.next=8,n.nerModel.train(t);case 8:e.next=12;break;case 10:n.logger.log("SKIPPING NER MODEL (NO SLOTS FOUND)!"),n.logger.log("==================================================================================================");case 12:n.logger.log("FINISHED TRAINING PIPELINE MODELS!"),n.logger.log("==================================================================================================");case 14:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})),f(this,"test",(l=u(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.log("START TESTING PIPELINE MODELS!"),n.logger.log("=================================================================================================="),e.next=4,n.classificationModel.test(t);case 4:if(r=e.sent,!(Object.keys(n.datasetParams.slotsToId).length>=2)){e.next=12;break}return e.next=9,n.nerModel.test(t);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0={correct:0,wrong:0};case 13:return o=e.t0,e.abrupt("return",{classificationStats:r,nerStats:o});case 15:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})),f(this,"predict",function(e){var t=n.classificationModel.predict(e);return{classification:t,ner:Object.keys(n.datasetParams.slotsToId).length>=2?n.nerModel.predict(e,t):[]}}),f(this,"save",(s=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.log("SAVING PIPELINE MODELS!"),n.logger.log("=================================================================================================="),e.next=4,n.classificationModel.tfModel().save(t.classificationPath);case 4:if(!(Object.keys(n.datasetParams.slotsToId).length>=2)){e.next=8;break}return e.next=8,n.nerModel.tfModel().save(t.nerPath);case 8:return e.next=10,n.embeddingsModel.tfModel().save(t.embeddingPath);case 10:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})),t.pipelineDefinition&&(this.pipelineDefinition=t.pipelineDefinition),this.datasetParams=t.datasetParams,this.logger=t.logger,this.tokenizer=function(e){var t=e?e.toLowerCase():e;if("en"===t)return r.default;if("es"===t)return o.default;throw new Error("Invalid config language. Only 'en' and 'es' are supported.")}(this.datasetParams.language),this.embeddingsModel=new a.EmbeddingsModel(t.ngramToIdDictionary,t.datasetParams.maxWordsPerSentence,this.pipelineDefinition.config.default.maxNgrams,this.pipelineDefinition.config.default.embeddingDimensions,this.tokenizer,t.pretrainedEmbedding,t.pretrainedNGramVectors);var s;var l;var p;var g,m,y=Object.assign({},this.pipelineDefinition.config.default,this.pipelineDefinition.config.classification);t.trainStatsHandler&&(g=t.trainStatsHandler.classification,m=t.trainStatsHandler.ner),this.classificationModel=new i.default(y,this.datasetParams,this.embeddingsModel,this.logger,t.pretrainedClassifier,g);var h=Object.assign({},this.pipelineDefinition.config.default,this.pipelineDefinition.config.ner);this.nerModel=new c.default(h,this.datasetParams,this.embeddingsModel,this.logger,t.pretrainedNer,m)}},456:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"FILTER_CHARS_REGEXP",/[^aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ 0-9\.,\?\'"!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]/g),r(this,"WORD_SEPARATORS_REGEXP",/([\ \.\,\%\*\-\=\+\;\|\`\~])/g),r(this,"NON_ALPHANUMERIC_REGEXP",/[^aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ0-9]/g),r(this,"UNKNOWN_NGRAM_KEY","__"),r(this,"NUMBERS_MAP",{cero:"0",uno:"1",dos:"2",tres:"3",cuatro:"4",cinco:"5",seis:"6",siete:"7",ocho:"8",nueve:"9"}),r(this,"sanitizeSentence",function(e){return e.trim().toLowerCase().replace(t.FILTER_CHARS_REGEXP,"")}),r(this,"splitSentenceToWords",function(e){return t.sanitizeSentence(e).split(t.WORD_SEPARATORS_REGEXP).map(function(e){return e.trim()}).filter(function(e){return!!e})}),r(this,"splitWordToBiGrams",function(e){var t=[],n=e.length-3+1;if(n<1)return t;for(;n--;)t[n]=e.substr(n,3);return t}),r(this,"joinWordsToSentence",function(e){return e.join(" ")})};t.default=o},457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddingsModel=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(96)),o=n(458),a=n(460);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){var e,t,n;function s(e,t,n,o,a,i,l){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),c(this,"tokenizer",void 0),c(this,"ngramToIdDictionary",void 0),c(this,"maxWords",void 0),c(this,"maxNgrams",void 0),c(this,"embeddingDimensions",void 0),c(this,"model",void 0),c(this,"inputModel",null),c(this,"tfModel",function(){return u.model}),c(this,"modelInput",function(){if(!u.inputModel){var e=r.layers.input({shape:[u.maxWords,u.maxNgrams],dtype:"int32"}),t=u.model.apply(e);u.inputModel=r.model({inputs:e,outputs:t})}return u.inputModel}),c(this,"embed",function(e){return r.tidy(function(){var t=u.sentencesToWordIds(e),n=u.modelInput().predictOnBatch(t);return t.dispose(),n})}),c(this,"dictionary",function(){return u.ngramToIdDictionary}),c(this,"sentencesToWordIds",function(e){return r.tidy(function(){var t=e.map(function(e){return u.tokenizer.splitSentenceToWords(e)}),n=r.buffer([e.length,u.maxWords,u.maxNgrams],"int32");return t.forEach(function(e,t){e.forEach(function(e,r){void 0!==u.ngramToIdDictionary[e]?n.set(u.ngramToIdDictionary[e],t,r,0):e.length&&u.generateWordIdsFromNGrams(e).forEach(function(o,a){a>u.maxNgrams?console.warn("Word exceeding max n grams per word: ",e):n.set(o,t,r,a)})})}),n.toTensor()})}),c(this,"generateWordIdsFromNGrams",function(e){var t=[],n=function(e){return void 0!==u.ngramToIdDictionary[e]&&(t.push(u.ngramToIdDictionary[e]),!0)};if(e.length>2){var r=!0;if(u.tokenizer.splitWordToBiGrams(e).forEach(function(e){!n(e)&&r&&(r=!1)}),r)return t}return t=[],e.split("").forEach(n),t}),this.ngramToIdDictionary=e,this.maxWords=t,this.maxNgrams=n,this.embeddingDimensions=o,this.model=i||s.setupModel(l||new Map,this.maxWords,this.maxNgrams,this.embeddingDimensions),this.tokenizer=a}return e=s,n=[{key:"setupModel",value:function(e,t,n,i){var c=r.sequential(),s=r.layers.embedding({embeddingsInitializer:new a.PreSavedEmbeddingsInitializer({embeddingDimensions:i,pretrainedNGramVectors:e}),inputDim:e.size,inputLength:[n],maskZero:!0,outputDim:i,trainable:!1});return c.add(r.layers.timeDistributed({layer:s,inputShape:[t,n]})),c.add(new o.CombineNgramsLayer({})),c}}],(t=null)&&i(e.prototype,t),n&&i(e,n),s}();t.EmbeddingsModel=s},458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CombineNgramsLayer=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(96)),o=n(459);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),f=0;f<i;f++)s[f]=arguments[f];return r=this,n=!(o=(e=c(t)).call.apply(e,[this].concat(s)))||"object"!==a(o)&&"function"!=typeof o?l(r):o,u(l(l(n)),"className",t.className),n}var n,f,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r.layers.Layer),n=t,(f=[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[e.length-1]]}},{key:"call",value:function(e,t){var n=this;return r.tidy(function(){n.invokeCallHook(e,t);var a=r.sum(e,2),i=(0,o.l2Normalize)(a,2);return a.dispose(),i})}}])&&i(n.prototype,f),d&&i(n,d),t}();t.CombineNgramsLayer=f,u(f,"className","CombineNgramsLayer"),r.serialization.SerializationMap.register(f)},460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreSavedEmbeddingsInitializer=void 0;var r=i(n(96)),o=i(n(461)),a=n(138);function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=u(t).call(this))||"object"!==c(o)&&"function"!=typeof o?d(r):o,p(d(d(n)),"config",void 0),p(d(d(n)),"className",t.className),n.config=e,n}var n,i,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,o.Initializer),n=t,(i=[{key:"apply",value:function(e,t){var n=this;return this.config&&this.config.pretrainedNGramVectors?r.tidy(function(){var e=(0,a.flatMapDeep)(s(n.config.pretrainedNGramVectors.values()));return r.tensor2d(e,[n.config.pretrainedNGramVectors.size,n.config.embeddingDimensions],"float32")}):r.zeros(e,t)}},{key:"getConfig",value:function(){return this.config.pretrainedNGramVectors}}])&&l(n.prototype,i),g&&l(n,g),t}();t.PreSavedEmbeddingsInitializer=g,p(g,"className","PreSavedEmbeddingsInitializer"),r.serialization.SerializationMap.register(g)},462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(96)),o=n(138),a=i(n(249));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,c,"next",e)}function c(e){l(a,r,o,i,c,"throw",e)}i(void 0)})}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t,n,i;function l(e,t,n,a,i,d){var p,y,h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),y=this,h=f(l).call(this),p=!h||"object"!==c(h)&&"function"!=typeof h?g(y):h,m(g(g(p)),"config",void 0),m(g(g(p)),"datasetParams",void 0),m(g(g(p)),"model",void 0),m(g(g(p)),"embeddingsModel",void 0),m(g(g(p)),"logger",void 0),m(g(g(p)),"classificationTrainStatsHandler",void 0),m(g(g(p)),"tfModel",function(){return p.model}),m(g(g(p)),"predict",function(e){var t=[];return r.tidy(function(){var n=p.embeddingsModel.embed(e),r=p.model.predict(n),o=r.dataSync();r.dispose(),n.dispose();var a=p.datasetParams.intents;e.forEach(function(e,n){var r=o.slice(n*a.length,n*a.length+a.length),i=[];r.forEach(function(t,n){return i.push({confidence:t,intent:a[n],sentence:e})}),i.sort(function(e,t){return e.confidence>t.confidence?-1:1}),t.push(i[0])})}),t}),m(g(g(p)),"train",function(){var e=u(regeneratorRuntime.mark(function e(t){var n,a,i,c,l,u,f,d,g,m,y,h,b,v,w,O,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.chunk)(t.trainY,p.config.batchSize),a=(0,o.chunk)(t.trainX,p.config.batchSize),p.logger.log("Start training classification model!"),i=p.model,c=!1,l=!0,u=!1,f=void 0,e.prev=8,d=a.entries()[Symbol.iterator]();case 10:if(l=(g=d.next()).done){e.next=34;break}if(m=s(g.value,2),y=m[0],h=m[1],!c){e.next=14;break}return e.abrupt("return");case 14:return b=p.embeddingsModel.embed(h),v=r.tensor1d(n[y],"int32"),w=r.oneHot(v,p.datasetParams.intents.length),e.next=19,i.fit(b,w,{callbacks:{onBatchEnd:r.nextFrame},epochs:p.config.epochs,shuffle:!0,validationSplit:p.config.trainingValidationSplit});case 19:v.dispose(),b.dispose(),w.dispose(),O=i.history.history,S=O.val_loss.length-1,p.classificationTrainStatsHandler&&p.classificationTrainStatsHandler({batch:y+1,batchEpochs:i.history.epoch.length,currentBatchSize:a[y].length,tensorsInMemory:r.memory().numTensors,totalBatches:a.length,trainingAccuracy:O.acc[S],trainingLoss:O.loss[S],validationAccuracy:O.val_acc[S],validationLoss:O.val_loss[S]}),p.logger.log("Trained ".concat(i.history.epoch.length," epochs on batch ").concat(y+1," of ").concat(a.length)),p.logger.log("Training Loss: ".concat(O.loss[S]," | Training Accuracy: ").concat(O.acc[S])),p.logger.log("Validation Loss: ".concat(O.val_loss[S]," | Validation Accuracy: ").concat(O.val_acc[S])),p.logger.warn("(Memory) Number of tensors in memory at the end of batch: ".concat(r.memory().numTensors)),p.logger.log("=================================================================================================="),p.config.lossThresholdToStopTraining&&O.loss[S]<p.config.lossThresholdToStopTraining&&O.val_loss[S]<p.config.lossThresholdToStopTraining&&(c=!0,p.logger.warn("Enough accuracy reached! Ending training after batch ".concat(y+1," of ").concat(a.length)),p.logger.log("=================================================================================================="));case 31:l=!0,e.next=10;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(8),u=!0,f=e.t0;case 40:e.prev=40,e.prev=41,l||null==d.return||d.return();case 43:if(e.prev=43,!u){e.next=46;break}throw f;case 46:return e.finish(43);case 47:return e.finish(40);case 48:case"end":return e.stop()}},e,this,[[8,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()),m(g(g(p)),"test",function(){var e=u(regeneratorRuntime.mark(function e(t,n){var r,a,i,c,l,u,f,d,g,m,y,h,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n||p.defaultResultsLogger,a={correct:0,wrong:0,lowConfidence:0},i=(0,o.chunk)(t.testX,p.config.batchSize),c=(0,o.chunk)(t.testY,p.config.batchSize),l=!0,u=!1,f=void 0,e.prev=7,d=i.entries()[Symbol.iterator]();!(l=(g=d.next()).done);l=!0)m=s(g.value,2),y=m[0],h=m[1],b=p.predict(h),r(h,c[y],b,a);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),u=!0,f=e.t0;case 15:e.prev=15,e.prev=16,l||null==d.return||d.return();case 18:if(e.prev=18,!u){e.next=21;break}throw f;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",a);case 24:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(t,n){return e.apply(this,arguments)}}()),m(g(g(p)),"defaultResultsLogger",function(e,t,n,r){return e.forEach(function(e,o){var a=p.datasetParams.intents[t[o]],i=n[o].intent===a;if(n[o].confidence<p.config.lowConfidenceThreshold){if(void 0===r.lowConfidence)return;r.lowConfidence++,p.logger.warn("LOW CONFIDENCE (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e))}else i?(r.correct++,p.logger.debug("CORRECT (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e))):(r.wrong++,p.logger.error("WRONG (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e)))}),r}),p.config=e,p.datasetParams=t,p.embeddingsModel=n,p.model=i||l.setup(p.config,p.datasetParams),p.logger=a,p.classificationTrainStatsHandler=d,p}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,a.PipelineModel),t=l,i=[{key:"setup",value:function(e,t){var n=t.maxWordsPerSentence,o=t.intents.length,a=r.train.adam(.0066,.0025,.1),i=r.input({dtype:"float32",shape:[n,e.embeddingDimensions],name:"embedded_words"}),c=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[0]],name:"classConv1",padding:"valid"}).apply(i),s=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[0]+1}).apply(c),l=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[1]],name:"classConv2",padding:"valid"}).apply(i),u=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[1]+1}).apply(l),f=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[2]],name:"classConv3",padding:"valid"}).apply(i),d=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[2]+1}).apply(f),p=r.layers.concatenate({axis:1}).apply([s,u,d]),g=r.layers.flatten().apply(p),m=r.layers.dropout({rate:e.drop}).apply(g),y=r.layers.flatten().apply(s),h=r.layers.concatenate({axis:1}).apply([m,y]),b=r.layers.dense({activation:"softmax",units:o}).apply(h),v=r.model({inputs:i,outputs:b});return v.compile({loss:"categoricalCrossentropy",metrics:["accuracy"],optimizer:a}),v}}],(n=null)&&d(t.prototype,n),i&&d(t,i),l}();t.default=y},463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(96)),o=n(138),a=c(n(249)),i=n(464);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){var t,n,c;function u(e,t,n,a,i,c){var p,g,h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),g=this,h=d(u).call(this),p=!h||"object"!==l(h)&&"function"!=typeof h?m(g):h,y(m(m(p)),"config",void 0),y(m(m(p)),"datasetParams",void 0),y(m(m(p)),"model",void 0),y(m(m(p)),"embeddingsModel",void 0),y(m(m(p)),"logger",void 0),y(m(m(p)),"nerTrainStatsHandler",void 0),y(m(m(p)),"tfModel",function(){return p.model}),y(m(m(p)),"rawPrediction",function(e,t){return r.tidy(function(){var n=p.datasetParams,a=n.maxWordsPerSentence,i=n.slotsToId,c=Object.keys(i).length,s=p.embeddingsModel.embed(e),l=t.map(function(e){var t=new Array(p.datasetParams.intents.length).fill(0),n=p.datasetParams.intents.indexOf(e.intent);return-1!==n&&(t[n]=1),t}),u=(0,o.flatMapDeep)(l),f=r.tensor2d(u,[l.length,p.datasetParams.intents.length]),d=p.model.predict([f,s]),g=d.dataSync();return d.dispose(),f.dispose(),s.dispose(),(0,o.chunk)(g,a*c).map(function(e){return(0,o.chunk)(e,c)}).map(function(e){return e.map(function(e){var t=0,n=e.length?e[t]:0;return e.forEach(function(r,o){e[t]<r&&(t=o,n=r)}),{highestIndex:t,confidence:n}})})})}),y(m(m(p)),"predict",function(e,t){var n=p.config.lowConfidenceThreshold,r=p.datasetParams.slotsToId,o=p.rawPrediction(e,t);return e.map(function(e,t){var a=o[t],i=p.embeddingsModel.tokenizer.splitSentenceToWords(e);return i.reduce(function(t,o,c){t.current&&0===t.current.confidence&&(t.current.confidence=a[c].confidence);var s=Object.keys(r).find(function(e){return a[c]&&r[e]===a[c].highestIndex});return s&&t.current?(t.current.key!==s?(t.current.key&&"O"!==t.current.key&&t.current.confidence>=n&&(t.slots[t.current.key]||(t.slots[t.current.key]=[]),t.slots[t.current.key].push({confidence:t.current.confidence,value:t.current.value})),t.current={confidence:a[c].confidence,key:s,value:o}):(t.current.value+=" ".concat(o),t.current.confidence=(a[c].confidence+t.current.confidence)/2),c+1===i.length?("O"!==t.current.key&&t.current.confidence>=n&&(t.slots[t.current.key]||(t.slots[t.current.key]=[]),t.slots[t.current.key].push({confidence:t.current.confidence,value:t.current.value})),{sentence:e,slots:t.slots}):t):t},{current:{key:"",value:"",confidence:0},slots:{},sentence:""})})}),y(m(m(p)),"train",function(){var e=f(regeneratorRuntime.mark(function e(t){var n,a,i,c,u,f,d,g,m,y,h,b,v,w,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.chunk)(t.trainY2,p.config.batchSize),a=(0,o.chunk)(t.trainY,p.config.batchSize),i=(0,o.chunk)(t.trainX,p.config.batchSize),c=p.config,u=c.epochs,f=c.trainingValidationSplit,d=Object.keys(p.datasetParams.slotsToId).length,p.logger.log("Start training NER model!"),g=!1,m=!0,y=!1,h=void 0,e.prev=10,b=regeneratorRuntime.mark(function e(){var t,o,c,l,m,y,h,b,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s(w.value,2),o=t[0],c=t[1],!g){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return l=r.tidy(function(){return r.oneHot(r.tensor1d(a[o],"int32"),p.datasetParams.intents.length).asType("float32")}),m=p.embeddingsModel.embed(c),y=r.tidy(function(){var e=[],t=!0,a=!1,i=void 0;try{for(var c,s=n[o][Symbol.iterator]();!(t=(c=s.next()).done);t=!0){var l=c.value,u=r.tensor1d(l,"int32").pad([[0,p.datasetParams.maxWordsPerSentence-l.length]]),f=r.oneHot(u,d).asType("float32");u.dispose(),e.push(f)}}catch(e){a=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}var g=r.stack(e);return e.forEach(function(e){return e.dispose()}),g}),e.next=8,p.model.fit([l,m],y,{callbacks:{onBatchEnd:r.nextFrame},epochs:u,shuffle:!0,validationSplit:f});case 8:return l.dispose(),m.dispose(),e.next=12,r.nextFrame();case 12:h=p.model.history.history,b=h.val_loss.length-1,v=p.model.history.epoch,p.nerTrainStatsHandler&&p.nerTrainStatsHandler({batch:o+1,batchEpochs:v.length,currentBatchSize:i[o].length,tensorsInMemory:r.memory().numTensors,totalBatches:i.length,trainingAccuracy:h.acc[b],trainingLoss:h.loss[b],validationAccuracy:h.val_acc[b],validationLoss:h.val_loss[b]}),p.logger.log("Trained ".concat(v.length," epochs on batch ").concat(o+1," of ").concat(i.length)),p.logger.log("Training Loss: ".concat(h.loss[b]," | Training Accuracy: ").concat(h.acc[b])),p.logger.log("Validation Loss: ".concat(h.val_loss[b]," | Validation Accuracy: ").concat(h.val_acc[b])),p.logger.warn("(Memory) Number of tensors in memory at the end of batch: ".concat(r.memory().numTensors)),p.logger.log("=================================================================================================="),y.dispose(),p.config.lossThresholdToStopTraining&&h.loss[b]<p.config.lossThresholdToStopTraining&&h.val_loss[b]<p.config.lossThresholdToStopTraining&&(g=!0,p.logger.warn("Enough accuracy reached! Ending training after batch ".concat(o+1," of ").concat(i.length)),p.logger.log("=================================================================================================="));case 23:case"end":return e.stop()}},e,this)}),v=i.entries()[Symbol.iterator]();case 13:if(m=(w=v.next()).done){e.next=21;break}return e.delegateYield(b(),"t0",15);case 15:if("object"!==l(O=e.t0)){e.next=18;break}return e.abrupt("return",O.v);case 18:m=!0,e.next=13;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(10),y=!0,h=e.t1;case 27:e.prev=27,e.prev=28,m||null==v.return||v.return();case 30:if(e.prev=30,!y){e.next=33;break}throw h;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}},e,this,[[10,23,27,35],[28,,30,34]])}));return function(t){return e.apply(this,arguments)}}()),y(m(m(p)),"test",function(){var e=f(regeneratorRuntime.mark(function e(t,n){var a,i,c,l,u,f,d,g,m,y,h,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n||p.defaultResultsLogger,i={correct:0,wrong:0},c=p.config.batchSize,l=(0,o.chunk)(t.testX,c),u=(0,o.chunk)(t.testY,c),f=(0,o.chunk)(t.testY2,c),d=!0,g=!1,m=void 0,e.prev=9,y=regeneratorRuntime.mark(function e(){var t,n,o,c,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s(b.value,2),n=t[0],o=t[1],c=u[n],l=o.map(function(e,t){return{confidence:1,intent:p.datasetParams.intents[c[t]],sentence:e}}),d=p.rawPrediction(o,l).map(function(e){return e.map(function(e){return e.highestIndex})}),a(o,f[n],d,i),e.next=7,r.nextFrame();case 7:case"end":return e.stop()}},e,this)}),h=l.entries()[Symbol.iterator]();case 12:if(d=(b=h.next()).done){e.next=17;break}return e.delegateYield(y(),"t0",14);case 14:d=!0,e.next=12;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(9),g=!0,m=e.t1;case 23:e.prev=23,e.prev=24,d||null==h.return||h.return();case 26:if(e.prev=26,!g){e.next=29;break}throw m;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.abrupt("return",i);case 32:case"end":return e.stop()}},e,this,[[9,19,23,31],[24,,26,30]])}));return function(t,n){return e.apply(this,arguments)}}()),y(m(m(p)),"defaultResultsLogger",function(e,t,n,r){return e.forEach(function(e,o){var a=t[o],i=n[o],c=!0;a.forEach(function(e,t){i[t]!==e&&c&&(c=!1)}),c?(r.correct++,p.logger.debug("CORRECT - ".concat(e," expected: ").concat(a,", predicted: ").concat(i))):(r.wrong++,p.logger.error("WRONG - ".concat(e," expected: ").concat(a,", predicted: ").concat(i)))}),r}),p.config=e,p.datasetParams=t,p.embeddingsModel=n,p.model=i||u.setup(p.config,p.datasetParams),p.logger=a,p.nerTrainStatsHandler=c,p}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,a.PipelineModel),t=u,c=[{key:"setup",value:function(e,t){var n=t.maxWordsPerSentence,o=e.addAttention,a=e.embeddingDimensions,c=e.numFilters,s=e.rnnUnits,l=Object.keys(t.slotsToId).length,u=r.train.adam(.0066,.0025,.1),f=r.input({dtype:"float32",shape:[n,a],name:"embedded_words"}),d=r.layers.conv1d({activation:"relu",filters:c[0],inputShape:[n,a],kernelInitializer:"randomNormal",kernelSize:1,name:"nerConv1",padding:"valid"}).apply(f),p=r.layers.conv1d({activation:"relu",filters:c[0],kernelInitializer:"randomNormal",kernelSize:1,name:"nerConv2",padding:"valid"}).apply(d),g=r.input({dtype:"float32",shape:[t.intents.length],name:"embedded_intent"}),m=r.layers.repeatVector({n}).apply(g),y=r.layers.concatenate().apply([m,f,p]),h=r.layers.bidirectional({layer:r.layers.lstm({units:s,returnSequences:!0,name:"bidi_encoder"})}).apply(y),b=null;if(o){var v=new i.TimeSeriesAttention({name:"attention_weight"}).apply(h[0]);b=r.layers.concatenate().apply([v,h[0],h[1]])}else b=r.layers.concatenate().apply([h[0],h[1]]);var w=r.layers.dense({activation:"softmax",units:l}).apply(b),O=r.model({inputs:[g,f],outputs:w});return O.compile({loss:"categoricalCrossentropy",metrics:["accuracy"],optimizer:u}),O}}],(n=null)&&p(t.prototype,n),c&&p(t,c),u}();t.default=h},464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSeriesAttention=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(96)),o=n(465);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=c(t).call(this,e||{}))||"object"!==a(i)&&"function"!=typeof i?l(r):i,u(l(l(n)),"className",t.className),u(l(l(n)),"timed",null),n.inputSpec=[new o.InputSpec({ndim:3})],n.supportsMasking=!0,n}var n,f,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r.layers.Layer),n=t,(f=[{key:"build",value:function(e){var t=e[2],n=r.sequential({name:"per_time_step"});n.add(r.layers.dense({inputShape:[t],kernelInitializer:"zeros",units:t,activation:"softmax",name:"att_dense1"})),n.add(r.layers.dense({units:t,kernelInitializer:"glorotNormal",activation:"tanh",name:"att_dense2"})),this.timed=r.layers.timeDistributed({layer:n,name:"att_td"}),this.timed.build(e),this.trainableWeights=this.timed.trainableWeights,this.nonTrainableWeights=this.timed.nonTrainableWeights,this.built=!0}},{key:"call",value:function(e,t){var n=this;if(!this.built||!this.timed)throw new Error("Calling TimeSeriesAttention layer before it was built correctly.");return r.tidy(function(){n.invokeCallHook(e,t);var o=n.timed.apply(e),a=r.layers.permute({dims:[2,1]}).apply(o),i=r.unstack(e[0]),c=r.unstack(a),s=i.map(function(e,t){return r.dot(e,c[t])}),l=r.stack(s),u=r.softmax(l),f=r.layers.permute({dims:[2,1]}).apply(u),d=r.unstack(f).map(function(e,t){return r.dot(e,i[t])});return r.stack(d)})}},{key:"computeOutputShape",value:function(e){return e}}])&&i(n.prototype,f),d&&i(n,d),t}();t.TimeSeriesAttention=f,u(f,"className","TimeSeriesAttention"),r.serialization.SerializationMap.register(f)},469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(159);var r=s(n(129));n(160);var o=s(n(131));n(196);var a=s(n(197));n(275);var i=s(n(470)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=(0,s(n(91)).default)(i.default.Search).withConfig({displayName:"TrainedPipelineTestInput__SearchInput",componentId:"sc-17hlu7-0"})(["> input{padding-right:70px !important;}"]),y=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=f(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==l(o)&&"function"!=typeof o?p(r):o,g(p(p(n)),"state",{disabled:!1,outTextContent:null}),g(p(p(n)),"predict",function(e){var t=n.props.pipeline.predict([e]);return Object.assign({},t.classification[0],t.ner[0])}),g(p(p(n)),"handleSubmit",function(e){if(!e||!e.trim())return null;n.setState({disabled:!0},function(){var t=JSON.stringify(n.predict(e),null,2);n.setState({outTextContent:t},function(){n.setState({disabled:!1});var e=document.getElementById("__inputSearch");e&&e.value&&(e.value="")})})}),n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,c.Component),n=t,(i=[{key:"render",value:function(){return c.createElement("div",null,c.createElement(r.default,{type:"flex",justify:"center"},c.createElement(o.default,{span:24,sm:{span:12}},c.createElement(a.default,{title:"Test trained pipeline:",style:{minHeight:"100%"}},c.createElement("p",null,c.createElement(m,{placeholder:"Enter some input to process...",enterButton:"Send",size:"large",onSearch:this.handleSubmit,id:"__inputSearch",disabled:this.state.disabled})),this.props.children||null)),c.createElement(o.default,{span:24,sm:{span:12}},c.createElement(a.default,{title:"Pipeline output:",style:{minHeight:"100%"}},c.createElement("pre",{style:{marginTop:"2em"}},this.state.outTextContent||"")))))}}])&&u(n.prototype,i),s&&u(n,s),t}();t.default=y},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.query=t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(835)),a=c(n(144)),i=c(n(843));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,f(t).apply(this,arguments))}var n,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.Component),n=t,(c=[{key:"render",value:function(){var e=this.props,t=e.data,n=e.location,c=[];return t&&!t.allFiles&&t.allFile.edges&&(c=t.allFile.edges.map(function(e){return{title:"".concat(e.node.name,".").concat(e.node.extension),value:e.node.fields.chatitoDSL}})),r.createElement(a.default,{location:n,addPadding:!0},r.createElement(o.default,{tabs:c},function(e){return r.createElement(i.default,e)}))}}])&&l(n.prototype,c),s&&l(n,s),t}();t.default=p;t.query="959099925"},835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(202);var r=b(n(203));n(149);var o=b(n(84));n(346);var a=b(n(349)),i=b(n(436)),c=h(n(0)),s=h(n(534)),l=h(n(837)),u=h(n(476)),f=n(94),d=n(138),p=n(838),g=h(n(839)),m=n(840),y=b(n(276));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){k(a,r,o,i,c,"next",e)}function c(e){k(a,r,o,i,c,"throw",e)}i(void 0)})}}var j=null,D=null;"undefined"!=typeof window&&(j=n(841).default,D=n(842).default);var I=function(){var e=T(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),C=function(e){function t(){var e,n,p,h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var b=arguments.length,S=new Array(b),x=0;x<b;x++)S[x]=arguments[x];return p=this,h=(e=P(t)).call.apply(e,[this].concat(S)),n=!h||"object"!==w(h)&&"function"!=typeof h?_(p):h,E(_(_(n)),"state",{error:null,warning:null,activeTabIndex:0,trainingDataset:{},testingDataset:{},showDrawer:!1,generating:!1,isDownloading:!1,downloadProgress:0}),E(_(_(n)),"tabsContainer",c.createRef()),E(_(_(n)),"codeflask",null),E(_(_(n)),"editorUpdatesSetupCount",0),E(_(_(n)),"codeInputValue",""),E(_(_(n)),"tabs",[]),E(_(_(n)),"debouncedTabDSLValidation",(0,d.debounce)(function(){if(n.codeInputValue.length){var e=n.getDSLValidation(n.codeInputValue),t={};t=e&&e.error?{error:e.error,warning:null}:e&&e.warning?{error:null,warning:e.warning}:{error:null,warning:null},n.setState(t,function(){n.saveToLocalStorage()})}else(n.state.error||n.state.warning)&&n.setState({error:null,warning:null})},300)),E(_(_(n)),"renderDatasetPreviewer",function(){return D?[c.createElement("div",{style:{padding:"20px 20px 0 20px",textAlign:"center"},key:"top_drawer"},c.createElement(a.default,{type:"circle",percent:n.state.downloadProgress,style:{marginBottom:20,marginLeft:30}}),c.createElement("br",null),c.createElement(r.default,{type:"primary",onClick:n.trainTestAndSaveModels,disabled:n.state.isDownloading},c.createElement(o.default,{type:"play-circle",theme:"outlined"}),"Start training!"),c.createElement(g.StrokeText,null,"Will download the embeddings dictionary (about 1mb) then train and test the models with your dataset. This process may take some time to complete depending on your hardware, please don't change the browser tab.")),c.createElement(g.BlockWrapper,{key:"bottom_drawer"},c.createElement(g.BlockWrapperTitle,null,"Review the generated training dataset:"),c.createElement(D,{style:{padding:20},src:n.state.trainingDataset,theme:"chalk",iconStyle:"square",enableClipboard:!1,displayDataTypes:!1,name:!1,collapsed:1}))]:null}),E(_(_(n)),"renderTabButton",function(e,t){var r=n.closerTab(t);return c.createElement(g.TabButton,{active:n.state.activeTabIndex===t,key:"tab-".concat(t),onClick:function(){return n.changeTab(t)}},e.title,c.createElement(o.default,{type:"close",theme:"outlined",onClick:r}))}),E(_(_(n)),"onCloseDrawer",function(){return n.setState({showDrawer:!1,trainingDataset:{},testingDataset:{}})}),E(_(_(n)),"onAddFile",function(){var e="newFile";window&&window.prompt&&(e=prompt("Please enter the new .chatito file name:",e)||""),e&&(n.tabs.push({title:"".concat(e,".chatito"),value:""}),n.changeTab(n.tabs.length-1,function(){n.tabsContainer&&n.tabsContainer.current&&n.tabsContainer.current.scrollTo({left:n.tabsContainer.current.scrollWidth,behavior:"smooth"})}))}),E(_(_(n)),"onToggleDrawer",function(){if(!n.state.showDrawer){var e=!1;try{e=n.validateChatitoFiles()}catch(e){return}e?n.setState({showDrawer:!1,generating:!0},T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(80);case 2:return e.next=4,n.generateDataset();case 4:case"end":return e.stop()}},e,this)}))):window&&window.alert&&window.alert("Please fix the errors or warnings found in the code.")}}),E(_(_(n)),"saveToLocalStorage",function(){window&&localStorage&&localStorage.setItem("tabs",JSON.stringify(n.tabs))}),E(_(_(n)),"loadFromLocalIfPresent",function(e,t){if(window&&localStorage)try{var n=localStorage.getItem(e);if(!t)return n;if(n)try{return JSON.parse(n)}catch(e){}}catch(e){console.error(e)}}),E(_(_(n)),"loadFromLocalStorage",function(e){if(window&&localStorage){var t=n.loadFromLocalIfPresent("tabs",!0);n.tabs=t||n.props.tabs}else n.tabs=n.props.tabs;e()}),E(_(_(n)),"changeTab",function(e,t){n.codeflask&&n.setState({activeTabIndex:e},function(){n.codeflask.updateCode(n.tabs[n.state.activeTabIndex].value),n.codeflask.setLineNumber(),t&&setTimeout(t,600)})}),E(_(_(n)),"closerTab",function(e){return function(t){if(t&&t.stopPropagation(),!n.tabs[e].value||window.confirm("Do you really want to remove '".concat(n.tabs[e].title,"'?"))){var r=n.state.activeTabIndex,o=n.state.activeTabIndex;r===e&&r>0&&(o=r-1),n.tabs=O(n.tabs.slice(0,e)).concat(O(n.tabs.slice(e+1))),n.tabs.length||(n.tabs.push({title:"newFile.chatito",value:""}),o=0),n.saveToLocalStorage(),n.changeTab(o)}}}),E(_(_(n)),"getDSLValidation",function(e){try{var t=s.astFromString(e).filter(function(e){return"IntentDefinition"===e.type&&null===e.args});return t.length?{warning:"Warning: Limit the number of generated examples for intents. E.g.: %[".concat(t[0].key,"]('training': '100')")}:null}catch(e){return{error:e.constructor===Error?e.toString():"".concat(e.name,": ").concat(e.message," Line: ").concat(e.location.start.line,", Column: ").concat(e.location.start.column)}}}),E(_(_(n)),"validateChatitoFiles",function(){return!n.tabs.some(function(e,t){if(e.value&&null!==n.getDSLValidation(e.value))return n.changeTab(t),!0;return!1})}),E(_(_(n)),"generateDataset",T(regeneratorRuntime.mark(function e(){var t,r,o,a,i,c,s,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},r={},o=!0,a=!1,i=void 0,e.prev=5,c=regeneratorRuntime.mark(function e(){var o,a,i,c,s,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=v(f.value,2),a=o[0],i=o[1],e.prev=1,e.next=4,l.adapter(i.value,t);case 4:c=e.sent,s=c.training,d=c.testing,t=s,u.mergeDeep(r,d),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),n.setState({trainingDataset:{},testingDataset:{},showDrawer:!1,generating:!1},function(){n.changeTab(a,function(){return n.setState({error:e.t0.message},function(){window&&window.alert&&window.alert("Please fix error: ".concat(e.t0.message))})})}),e.abrupt("return",{v:void 0});case 15:case"end":return e.stop()}},e,this,[[1,11]])}),s=n.tabs.entries()[Symbol.iterator]();case 8:if(o=(f=s.next()).done){e.next=16;break}return e.delegateYield(c(),"t0",10);case 10:if("object"!==w(d=e.t0)){e.next=13;break}return e.abrupt("return",d.v);case 13:o=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(5),a=!0,i=e.t1;case 22:e.prev=22,e.prev=23,o||null==s.return||s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:n.setState({trainingDataset:t,testingDataset:r,generating:!1,showDrawer:!0});case 31:case"end":return e.stop()}},e,this,[[5,18,22,30],[23,,25,29]])}))),E(_(_(n)),"downloadFiles",function(){var e=T(regeneratorRuntime.mark(function e(t){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,o=0,n.setState({isDownloading:!0,downloadProgress:0}),e.next=5,Promise.all(t.map(function(e){return i.default.get(e,{onDownloadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");null!==t&&(r+=t,o+=Math.round(100*e.loaded/r)),n.setState({downloadProgress:o})}})}));case 5:return a=e.sent,n.setState({isDownloading:!1,downloadProgress:100}),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),E(_(_(n)),"trainTestAndSaveModels",T(regeneratorRuntime.mark(function e(){var t,r,o,a,i,c,s,l,u,d,p,g,h,b,v,w,O,S,P,x,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[(0,f.withPrefix)("/models/dictionary.json"),(0,f.withPrefix)("/models/ngram_to_id_dictionary.json")],e.next=3,n.downloadFiles(t);case 3:return r=e.sent,o=new Map(r[0].data),a=r[1].data,i=(0,m.dictionariesFromDataset)(n.state.trainingDataset,n.state.testingDataset,y.default,"en"),c=i.dictionary,s=c.maxWordsPerSentence,l=c.slotsToId,u=c.intents,d=c.intentsWithSlots,p=c.testX,g=c.testY,h=c.testY2,b=c.trainX,v=c.trainY,w=c.trainY2,O=c.language,S=i.stats,P={trainX:b,trainY:v,trainY2:w},x={testX:p,testY:g,testY2:h},_={language:O,intents:u,intentsWithSlots:d,maxWordsPerSentence:s,slotsToId:l},e.next=12,I(200);case 12:n.setState({trainingParams:P,testingParams:x,datasetParams:_,embeddingsAndTrainingDatasetLoaded:!0,ngramToIdDictionary:a,pretrainedNGramVectors:o,datasetStats:S});case 13:case"end":return e.stop()}},e,this)}))),n}var n,h,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,c.Component),n=t,(h=[{key:"componentDidMount",value:function(){var e=this;j&&this.loadFromLocalStorage(function(){var t=new j("#my-code-editor",{language:"chatito",lineNumbers:!0});t.addLanguage("chatito",p.chatitoPrism),t.onUpdate(function(t){e.tabs&&e.tabs[e.state.activeTabIndex]&&(e.codeInputValue=t,e.tabs[e.state.activeTabIndex].value=t,e.editorUpdatesSetupCount<2?e.editorUpdatesSetupCount++:(e.setState({trainingDataset:{},testingDataset:{}}),e.debouncedTabDSLValidation()))}),e.tabs&&e.tabs[e.state.activeTabIndex]&&t.updateCode(e.tabs[e.state.activeTabIndex].value),t.setLineNumber(),e.codeflask=t})}},{key:"render",value:function(){var e=this.state;if(!e.generating&&!e.isDownloading&&e.embeddingsAndTrainingDatasetLoaded&&e.datasetParams&&e.trainingParams&&e.testingParams&&e.datasetStats&&this.props.children&&e.ngramToIdDictionary&&e.pretrainedNGramVectors)return this.props.children({datasetParams:e.datasetParams,trainDataset:e.trainingParams,testDataset:e.testingParams,ngramToIdDictionary:e.ngramToIdDictionary,pretrainedNGramVectors:e.pretrainedNGramVectors,datasetStats:e.datasetStats});var t=e.error?"error":e.warning?"warning":"success",n=e.generating?c.createElement(o.default,{type:"loading",theme:"outlined"}):null;return c.createElement("div",null,c.createElement("h2",null,"Train a custom assistant"),c.createElement("p",null,"Chatito, is a language that helps create and maintain datasets. You can improve and customize the assistant accuracy and knowledge by extending intents, slots and sentences to build a cloud of possible combinations and only pull the examples needed. Click 'Generate dataset' to continue."),c.createElement(g.EditorWrapper,null,c.createElement(g.EditorHeader,{style:{display:"block",textAlign:"right",padding:16}},c.createElement(r.default,{onClick:this.onAddFile,style:{marginRight:32},type:"dashed"},c.createElement(o.default,{type:"plus",theme:"outlined"}),"Add new file"),c.createElement(r.default,{type:"primary",onClick:this.onToggleDrawer,disabled:!!e.error},c.createElement(o.default,{type:"play-circle",theme:"outlined"}),"Generate dataset")),c.createElement(g.EditorHeader,null,c.createElement(g.TabsArea,{innerRef:this.tabsContainer},this.tabs.map(this.renderTabButton))),c.createElement(g.CodeStyles,{id:"my-code-editor"}),c.createElement(g.AlertNotification,{state:t}," ",e.error||e.warning||"Correct syntax!"),c.createElement(g.EditorOverlay,{onClick:this.onCloseDrawer,showDrawer:e.showDrawer||e.generating},n,c.createElement(g.Drawer,{onClick:function(e){return e.stopPropagation()},showDrawer:e.showDrawer},c.createElement(o.default,{type:"close",theme:"outlined",onClick:this.onCloseDrawer}),this.renderDatasetPreviewer()))))}}])&&S(n.prototype,h),b&&S(n,b),t}();t.default=C},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chatitoPrism=void 0;t.chatitoPrism={comments:[{pattern:/^\/\/.*/,greedy:!0},{pattern:/((\n|\r\n)+)\/\/.*/,greedy:!0}],intentDefinition:[{pattern:/^%\[[^\]]+\]((\(.+\))?)/,inside:{intentArguments:/((\(.+\))?)$/}},{pattern:/((\n|\r\n)+)%\[[^\]]+\]((\(.+\))?)/,inside:{intentArguments:/((\(.+\))?)$/}}],slotDefinition:[{pattern:/^\@\[[^\]]+\]((\(.+\))?)/,inside:{slotArguments:/((\(.+\))?)$/}},{pattern:/((\n|\r\n)+)\@\[[^\]]+\]((\(.+\))?)/,inside:{slotArguments:/((\(.+\))?)$/}}],slot:{pattern:/\@\[[^\]]+(\?)?\]/,greedy:!0},alias:{pattern:/~\[[^\]]+(\?)?\]/,greedy:!0},default:{pattern:/[^\r\n]/i,greedy:!0}}},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockWrapperTitle=t.BlockWrapper=t.EditorOverlay=t.Drawer=t.StrokeText=t.EditorWrapper=t.TabsArea=t.EditorHeader=t.TabButton=t.CodeStyles=t.AlertNotification=void 0;var r,o=(r=n(91))&&r.__esModule?r:{default:r};var a=o.default.div.withConfig({displayName:"editorStyles__AlertNotification",componentId:"gh08f5-0"})(["width:100%;background-color:",";bottom:0;margin:auto;right:0;text-align:center;padding:12px;color:white;z-index:99;font-size:14px;"],function(e){var t=e.state;return"error"===t?"#c80000":"warning"===t?"#7f8000":"#008800"});t.AlertNotification=a;var i=o.default.div.withConfig({displayName:"editorStyles__CodeStyles",componentId:"gh08f5-1"})(["white-space:pre-wrap;position:relative;margin:auto;width:inherit;height:calc(100vh - 330px) !important;min-height:350px;background-color:",";> .codeflask{background-color:",";> textarea.codeflask__textarea{color:",";caret-color:#343434;}&.codeflask--has-line-numbers{:before{background-color:",";}> pre{width:auto !important;}div.codeflask__lines{z-index:3;height:auto !important;padding:10px 4px 0 0;> .codeflask__lines__line{color:#6473a0;background-color:",";}}}*::-webkit-scrollbar{width:10px;height:10px;}*::-webkit-scrollbar-thumb{background-color:#7c7c9c;box-shadow:inset 0 0 2px rgba(0,0,0,0.8);}*::-webkit-scrollbar-track{box-shadow:inset 0 0 2px rgba(0,0,0,0.8);}*::-webkit-scrollbar-corner{background-color:transparent;}}.token.comments{color:#999;}.token.intentDefinition{color:#ff3636;}.token.slotDefinition{color:#d000ff;}.token.slot{color:#c000ee;}.token.alias{color:#3f51b5;}.token.default{color:#343434;}.token.intentArguments{color:#ff9191;}.token.slotArguments{color:#da7cee;}"],"#f8f8f8","#f8f8f8","#f8f8f8","#D0D2D5","#D0D2D5");t.CodeStyles=i;var c=o.default.div.withConfig({displayName:"editorStyles__TabButton",componentId:"gh08f5-2"})(["cursor:pointer;display:inline-block;background-color:",";font-size:12px;color:#454545;padding:13px 3px 13px 13px;border-right:1px solid #d5d5d5;zoom:1;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;i.anticon-close{margin-left:8px;margin-right:8px;color:#5c5c5c;:hover{color:#ff66ff;}}"],function(e){return e.active?"#f8f8f8":"#D0D2D5"});t.TabButton=c;var s=o.default.div.withConfig({displayName:"editorStyles__EditorHeader",componentId:"gh08f5-3"})(["display:flex;flex-direction:row;width:100%;max-width:100%;background-color:",";padding-left:40px;padding-top:10px;"],"#D0D2D5");t.EditorHeader=s;var l=o.default.div.withConfig({displayName:"editorStyles__TabsArea",componentId:"gh08f5-4"})(["width:auto;max-width:100%;white-space:nowrap;position:relative;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;&::-webkit-scrollbar{height:6px;}&::-webkit-scrollbar-thumb{background-color:#7c7c9c;-webkit-box-shadow:inset 0 0 2px rgba(0,0,0,0.8);}&::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 2px rgba(0,0,0,0.8);}*::-webkit-scrollbar-corner{background-color:transparent;}"]);t.TabsArea=l;var u=o.default.div.withConfig({displayName:"editorStyles__EditorWrapper",componentId:"gh08f5-5"})(["width:auto;overflow:auto;margin:auto;position:relative;"]);t.EditorWrapper=u;var f=o.default.p.withConfig({displayName:"editorStyles__StrokeText",componentId:"gh08f5-6"})(["text-align:center;font-size:12px;padding-top:20px;color:#fff;text-shadow:-1px -1px 0 #444,1px -1px 0 #444,-1px 1px 0 #444,1px 1px 0 #444;"]);t.StrokeText=f;var d=o.default.div.withConfig({displayName:"editorStyles__Drawer",componentId:"gh08f5-7"})(["z-index:99;position:absolute;background-color:rgba(40,40,40,0.8);-webkit-box-shadow:-5px 0px 5px -5px rgba(0,0,0,0.55);-moz-box-shadow:-5px 0px 5px -5px rgba(0,0,0,0.55);box-shadow:-5px 0px 5px -5px rgba(0,0,0,0.55);top:0;right:0;max-width:700px;height:100%;width:",";-webkit-transition:0.65s ease;-moz-transition:0.65s ease;-o-transition:0.65s ease;transition:0.65s ease;overflow:auto;> i.anticon-close{cursor:pointer;color:white;margin:8px 20px 8px 20px;float:right;:hover{color:#ff66ff;}}.ant-progress .ant-progress-text{color:#fff;}"],function(e){return e.showDrawer?"100%":"0px"});t.Drawer=d;var p=o.default.div.withConfig({displayName:"editorStyles__EditorOverlay",componentId:"gh08f5-8"})(["z-index:999;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);visibility:",";-webkit-transition:0.25s ease;-moz-transition:0.25s ease;-o-transition:0.25s ease;transition:0.25s ease;> i.anticon-loading{position:absolute;font-size:50px;left:50%;transform:translateX(-50%);top:50%;transform:translateY(-50%);}"],function(e){return e.showDrawer?"visible":"hidden"});t.EditorOverlay=p;var g=o.default.div.withConfig({displayName:"editorStyles__BlockWrapper",componentId:"gh08f5-9"})(["background-color:#e4e4e4;margin:20px;overflow:auto;border-radius:8px;-webkit-box-shadow:0px 0px 50px 0px rgba(0,0,0,0.4);-moz-box-shadow:0px 0px 50px 0px rgba(0,0,0,0.4);box-shadow:0px 0px 50px 0px rgba(0,0,0,0.4);clear:both;"]);t.BlockWrapper=g;var m=o.default.div.withConfig({displayName:"editorStyles__BlockWrapperTitle",componentId:"gh08f5-10"})(["background-color:#6b5a86;color:#efefef;font-size:13px;padding:8px 10px;border-top-left-radius:8px;border-top-right-radius:8px;"]);t.BlockWrapperTitle=m},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dictionariesFromDataset=function(e,t,n,a){var i={intents:Object.keys(e),intentsWithSlots:[],language:a,maxWordsPerSentence:0,slotsToId:{O:0},testX:[],testY:[],testY2:[],trainX:[],trainY:[],trainY2:[]},c=new Array(i.intents.length).fill(0),s=new Array(i.intents.length).fill(0),l=[],u=[],f=new Set;i.intents.forEach(function(o){var a=!1,c=function(e){var t=e.map(function(e){var t=n.splitSentenceToWords(e.value),r=new Array(t.length).fill(0),c=e.slot;if(c){f.add(o),a||(a=!0);var s=c;void 0===i.slotsToId[s]&&(i.slotsToId[s]=Object.keys(i.slotsToId).length),t.forEach(function(e,t){r[t]=i.slotsToId[s]})}return r}),c=(0,r.flatten)(t),s=e.map(function(e){return e.value}).join(""),l=n.splitSentenceToWords(s);i.maxWordsPerSentence<l.length&&(i.maxWordsPerSentence=l.length);var u=i.intents.findIndex(function(e){return e===o});return{sentence:s,intentId:u,tagsForSentence:c}},s=e[o].map(c);l=l.concat(s);var d=t[o].map(c);u=u.concat(d)}),i.intentsWithSlots=o(f),(0,r.shuffle)(l).forEach(function(e){c[e.intentId]++,i.trainX.push(e.sentence),i.trainY.push(e.intentId),i.trainY2.push(e.tagsForSentence)}),(0,r.shuffle)(u).forEach(function(e){s[e.intentId]++,i.testX.push(e.sentence),i.testY.push(e.intentId),i.testY2.push(e.tagsForSentence)});var d=i.intents.map(function(e,t){return{intent:e,testing:s[t],training:c[t]}});return{dictionary:i,stats:d}},t.buildDictionary=function(e){var t={NGRAM_TO_ID_MAP:{},PRETRAINED:new Map};return t.PRETRAINED=new Map(e),o(t.PRETRAINED.keys()).forEach(function(e,n){t.NGRAM_TO_ID_MAP[e]=n}),t};var r=n(138);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}},843:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(159);var r=m(n(129));n(160);var o=m(n(131));n(844);var a=m(n(847));n(196);var i=m(n(197));n(848);var c=m(n(851)),s=g(n(96)),l=g(n(0)),u=m(n(91)),f=n(455),d=m(n(853)),p=m(n(469));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)})}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=["==================================================================================================","WARNING: Training may take several minutes depending on your hardware, your browser may be slow while training.","NOTE: Will train classification model, then NER model, then run the test dataset on both and finally download the trained models.","        The line-plotting of the training models will show at the end to avoid extra GPU/CPU load during training.","=================================================================================================="],_=u.default.div.withConfig({displayName:"TrainingDashboard__LoggerFeed",componentId:"eewm59-0"})(["white-space:pre-wrap;height:130px;overflow:scroll;background-color:#ededed;padding:10px 20px;margin-bottom:20px;display:flex;flex-direction:column-reverse;border:1px solid #ccc;font-size:12px;margin-bottom:20px;"]),E=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return r=this,o=(e=w(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==y(o)&&"function"!=typeof o?S(r):o,P(S(S(n)),"state",{currentStep:0,logLinesCounter:0,pipelineFinishedTraining:!1,plot:!1,valuesClassification:[],valuesNer:[]}),P(S(S(n)),"pipeline",null),P(S(S(n)),"trainStatsClassification",[]),P(S(S(n)),"trainStatsNer",[]),P(S(S(n)),"renderPipelineManualTestInput",function(){return 3===n.state.currentStep&&n.pipeline?l.createElement(l.Fragment,null,l.createElement(c.default,{message:"Finished training! You can test sentences manually or look at the logs for stats.",type:"success",style:{marginBottom:20}}),l.createElement(p.default,{pipeline:n.pipeline},l.createElement("p",null,"The pipeline was trained and tested on your custom dataset:"),l.createElement("ul",null,n.props.datasetStats.map(function(e,t){return l.createElement("li",{key:"int-".concat(t)},l.createElement("strong",null,e.intent)," (",e.training," training and ",e.testing," testing examples).")})))):null}),P(S(S(n)),"renderChart",function(e,t,r){if(!r.length||!t.length)return l.createElement(i.default,{title:e,style:{minHeight:"100%"}},l.createElement("p",null,"Waiting..."));var o="Batch ".concat(t.length," of ").concat(r[r.length-1].totalBatches),a=n.state.plot?l.createElement(d.default,{dataValues:t}):null;return l.createElement(i.default,{title:e,extra:o,style:{minHeight:"100%"}},a,l.createElement("p",{style:{fontSize:"12px"}},l.createElement("strong",null,"Train Accuracy:")," ",r[r.length-1].trainingAccuracy,l.createElement("br",null),l.createElement("strong",null,"Validation Accuracy:")," ",r[r.length-1].validationAccuracy,l.createElement("br",null),l.createElement("strong",null,"Train Loss:")," ",r[r.length-1].trainingLoss,l.createElement("br",null),l.createElement("strong",null,"Validation Loss:")," ",r[r.length-1].validationLoss,l.createElement("br",null)))}),P(S(S(n)),"trainStatsHandler",function(){return{classification:function(e){n.trainStatsClassification.push(e);var t=e.batch,r=e.validationLoss,o=e.trainingLoss;n.setState(function(e){return{valuesClassification:e.valuesClassification.concat([{batch:t,validationLoss:r,trainingLoss:o}])}})},ner:function(e){n.trainStatsNer.push(e);var t=e.batch,r=e.validationLoss,o=e.trainingLoss;n.setState(function(e){return{currentStep:0===e.currentStep?1:e.currentStep,valuesNer:e.valuesNer.concat([{batch:t,validationLoss:r,trainingLoss:o}])}})}}}),P(S(S(n)),"trainTestAndSaveModels",b(regeneratorRuntime.mark(function e(){var t,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={debug:function(){return null},error:t=function(){x.push.apply(x,arguments),n.setState(function(e){return{logLinesCounter:e.logLinesCounter+1}})},log:t,warn:t},n.pipeline=new f.AidaPipeline({datasetParams:n.props.datasetParams,logger:r,ngramToIdDictionary:n.props.ngramToIdDictionary,pretrainedNGramVectors:n.props.pretrainedNGramVectors,trainStatsHandler:n.trainStatsHandler()}),n.pipeline){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,n.pipeline.train(n.props.trainDataset);case 7:return n.setState({currentStep:2}),e.next=10,n.pipeline.test(n.props.testDataset);case 10:return o=e.sent,n.setState({currentStep:3}),r.log("=================================================================================================="),r.log("Test dataset stats:"),r.log(JSON.stringify(o,null,2)),r.log("=================================================================================================="),e.next=18,n.pipeline.save({classificationPath:"downloads://classification",embeddingPath:"downloads://embedding",nerPath:"downloads://ner"});case 18:n.setState({plot:!0});case 19:case"end":return e.stop()}},e,this)}))),n}var n,u,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,l.Component),n=t,(u=[{key:"componentDidMount",value:function(){this.trainTestAndSaveModels()}},{key:"componentWillUnmount",value:function(){this.pipeline=null,console.log(s.memory()),s.disposeVariables()}},{key:"render",value:function(){return l.createElement("div",null,l.createElement(a.default,{size:"small",current:this.state.currentStep,style:{marginBottom:"20px"}},l.createElement(a.default.Step,{title:"Train classification model"}),l.createElement(a.default.Step,{title:"Train NER model"}),l.createElement(a.default.Step,{title:"Test models"}),l.createElement(a.default.Step,{title:"Download and try"})),this.renderPipelineManualTestInput(),l.createElement("h3",{style:{marginTop:"20px"}},"Training logs:"),l.createElement(_,null,x.join("\n")),l.createElement(r.default,{type:"flex",justify:"center"},l.createElement(o.default,{span:12},this.renderChart("Classification model stats",this.state.valuesClassification,this.trainStatsClassification)),l.createElement(o.default,{span:12},this.renderChart("NER model stats",this.state.valuesNer,this.trainStatsNer))))}}])&&v(n.prototype,u),g&&v(n,g),t}();t.default=E},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,c(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r.Component),n=t,(o=[{key:"render",value:function(){return r.createElement("div",null)}}])&&a(n.prototype,o),l&&a(n,l),t}();t.default=l}}]);
//# sourceMappingURL=component---web-pages-train-tsx-ac0c89b86db4738674e1.js.map